!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(window.jQuery)}(function(u){"use strict";var h,d;u.fn.ratingLocales={},u.fn.ratingThemes={},h={NAMESPACE:".rating",DEFAULT_MIN:0,DEFAULT_MAX:5,DEFAULT_STEP:.5,isEmpty:function(t,e){return null==t||0===t.length||e&&""===u.trim(t)},getCss:function(t,e){return t?" "+e:""},addCss:function(t,e){t.removeClass(e).addClass(e)},getDecimalPlaces:function(t){t=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},applyPrecision:function(t,e){return parseFloat(t.toFixed(e))},handler:function(t,e,a,n,i){i=i?e:e.split(" ").join(h.NAMESPACE+" ")+h.NAMESPACE;n||t.off(i),t.on(i,a)}},(d=function(t,e){this.$element=u(t),this._init(e)}).prototype={constructor:d,_parseAttr:function(t,e){var a,n,i=this.$element,r=i.attr("type");if("range"===r||"number"===r){switch(r=e[t]||i.data(t)||i.attr(t),t){case"min":a=h.DEFAULT_MIN;break;case"max":a=h.DEFAULT_MAX;break;default:a=h.DEFAULT_STEP}i=h.isEmpty(r)?a:r,n=parseFloat(i)}else n=parseFloat(e[t]);return isNaN(n)?a:n},_parseValue:function(t){t=parseFloat(t);return isNaN(t)&&(t=this.clearValue),!this.zeroAsNull||0!==t&&"0"!==t?t:null},_setDefault:function(t,e){h.isEmpty(this[t])&&(this[t]=e)},_initSlider:function(t){var e=this,a=e.$element.val();e.initialValue=h.isEmpty(a)?0:a,e._setDefault("min",e._parseAttr("min",t)),e._setDefault("max",e._parseAttr("max",t)),e._setDefault("step",e._parseAttr("step",t)),(isNaN(e.min)||h.isEmpty(e.min))&&(e.min=h.DEFAULT_MIN),(isNaN(e.max)||h.isEmpty(e.max))&&(e.max=h.DEFAULT_MAX),(isNaN(e.step)||h.isEmpty(e.step)||0===e.step)&&(e.step=h.DEFAULT_STEP),e.diff=e.max-e.min},_initHighlight:function(t){var e,a=this,n=a._getCaption();t=t||a.$element.val(),e=a.getWidthFromValue(t)+"%",a.$filledStars.width(e),a.cache={caption:n,width:e,val:t}},_getContainerCss:function(){var t=this;return"rating-container"+h.getCss(t.theme,"theme-"+t.theme)+h.getCss(t.rtl,"rating-rtl")+h.getCss(t.size,"rating-"+t.size)+h.getCss(t.animate,"rating-animate")+h.getCss(t.disabled||t.readonly,"rating-disabled")+h.getCss(t.containerClass,t.containerClass)},_checkDisabled:function(){var t=this,e=t.$element,a=t.options;t.disabled=void 0===a.disabled?e.attr("disabled")||!1:a.disabled,t.readonly=void 0===a.readonly?e.attr("readonly")||!1:a.readonly,t.inactive=t.disabled||t.readonly,e.attr({disabled:t.disabled,readonly:t.readonly})},_addContent:function(t,e){var a=this.$container,t="clear"===t;return this.rtl?t?a.append(e):a.prepend(e):t?a.prepend(e):a.append(e)},_generateRating:function(){var t,e=this,a=e.$element,n=e.$container=u(document.createElement("div")).insertBefore(a);h.addCss(n,e._getContainerCss()),e.$rating=t=u(document.createElement("div")).attr("class","rating-stars").appendTo(n).append(e._getStars("empty")).append(e._getStars("filled")),e.$emptyStars=t.find(".empty-stars"),e.$filledStars=t.find(".filled-stars"),e._renderCaption(),e._renderClear(),e._initHighlight(),n.append(a),e.rtl&&(n=Math.max(e.$emptyStars.outerWidth(),e.$filledStars.outerWidth()),e.$emptyStars.width(n)),a.appendTo(t)},_getCaption:function(){return this.$caption&&this.$caption.length?this.$caption.html():this.defaultCaption},_setCaption:function(t){this.$caption&&this.$caption.length&&this.$caption.html(t)},_renderCaption:function(){var t=this,e=t.$element.val(),a=t.captionElement?u(t.captionElement):"";if(t.showCaption){if(e=t.fetchCaption(e),a&&a.length)return h.addCss(a,"caption"),a.html(e),void(t.$caption=a);t._addContent("caption",'<div class="caption">'+e+"</div>"),t.$caption=t.$container.find(".caption")}},_renderClear:function(){var t,e=this,a=e.clearElement?u(e.clearElement):"";if(e.showClear){if(t=e._getClearClass(),a.length)return h.addCss(a,t),a.attr({title:e.clearButtonTitle}).html(e.clearButton),void(e.$clear=a);e._addContent("clear",'<div class="'+t+'" title="'+e.clearButtonTitle+'">'+e.clearButton+"</div>"),e.$clear=e.$container.find("."+e.clearButtonBaseClass)}},_getClearClass:function(){return this.clearButtonBaseClass+" "+(this.inactive?"":this.clearButtonActiveClass)},_toggleHover:function(t){var e,a=this;t&&(a.hoverChangeStars&&(e=a.getWidthFromValue(a.clearValue),e=t.val<=a.clearValue?e+"%":t.width,a.$filledStars.css("width",e)),!a.hoverChangeCaption||(e=t.val<=a.clearValue?a.fetchCaption(a.clearValue):t.caption)&&a._setCaption(e+""))},_init:function(t){var a=this,e=a.$element.addClass("rating-input");return a.options=t,u.each(t,function(t,e){a[t]=e}),!a.rtl&&"rtl"!==e.attr("dir")||(a.rtl=!0,e.attr("dir","rtl")),a.starClicked=!1,a.clearClicked=!1,a._initSlider(t),a._checkDisabled(),a.displayOnly&&(a.inactive=!0,a.showClear=!1,a.showCaption=!1),a._generateRating(),a._initEvents(),a._listen(),t=a._parseValue(e.val()),e.val(t),e.removeClass("rating-loading")},_initEvents:function(){var i=this;i.events={_getTouchPosition:function(t){return(h.isEmpty(t.pageX)?t.originalEvent.touches[0]:t).pageX-i.$rating.offset().left},_listenClick:function(t,e){return t.stopPropagation(),t.preventDefault(),!0!==t.handled&&(e(t),void(t.handled=!0))},_noMouseAction:function(t){return!i.hoverEnabled||i.inactive||t&&t.isDefaultPrevented()},initTouch:function(t){var e,a,n=i.clearValue||0;("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)&&!i.inactive&&(e=t.originalEvent,e=h.isEmpty(e.touches)?e.changedTouches:e.touches,e=i.events._getTouchPosition(e[0]),"touchend"===t.type?(i._setStars(e),t=[i.$element.val(),i._getCaption()],i.$element.trigger("change").trigger("rating.change",t),i.starClicked=!0):(e=(t=i.calculate(e)).val<=n?i.fetchCaption(n):t.caption,a=i.getWidthFromValue(n),n=t.val<=n?a+"%":t.width,i._setCaption(e),i.$filledStars.css("width",n)))},starClick:function(t){var e;i.events._listenClick(t,function(t){return!i.inactive&&(e=i.events._getTouchPosition(t),i._setStars(e),e=[i.$element.val(),i._getCaption()],i.$element.trigger("change").trigger("rating.change",e),void(i.starClicked=!0))})},clearClick:function(t){i.events._listenClick(t,function(){i.inactive||(i.clear(),i.clearClicked=!0)})},starMouseMove:function(t){i.events._noMouseAction(t)||(i.starClicked=!1,t=i.events._getTouchPosition(t),t=i.calculate(t),i._toggleHover(t),i.$element.trigger("rating.hover",[t.val,t.caption,"stars"]))},starMouseLeave:function(t){i.events._noMouseAction(t)||i.starClicked||(t=i.cache,i._toggleHover(t),i.$element.trigger("rating.hoverleave",["stars"]))},clearMouseMove:function(t){var e,a;!i.events._noMouseAction(t)&&i.hoverOnClear&&(i.clearClicked=!1,t='<span class="'+i.clearCaptionClass+'">'+i.clearCaption+"</span>",e=i.clearValue,a=i.getWidthFromValue(e)||0,i._toggleHover({caption:t,width:a,val:e}),i.$element.trigger("rating.hover",[e,t,"clear"]))},clearMouseLeave:function(t){i.events._noMouseAction(t)||i.clearClicked||!i.hoverOnClear||(t=i.cache,i._toggleHover(t),i.$element.trigger("rating.hoverleave",["clear"]))},resetForm:function(t){t&&t.isDefaultPrevented()||i.inactive||i.reset()}}},_listen:function(){var t=this,e=t.$element,a=e.closest("form"),n=t.$rating,i=t.$clear,r=t.events;return h.handler(n,"touchstart touchmove touchend",u.proxy(r.initTouch,t)),h.handler(n,"click touchstart",u.proxy(r.starClick,t)),h.handler(n,"mousemove",u.proxy(r.starMouseMove,t)),h.handler(n,"mouseleave",u.proxy(r.starMouseLeave,t)),t.showClear&&i.length&&(h.handler(i,"click touchstart",u.proxy(r.clearClick,t)),h.handler(i,"mousemove",u.proxy(r.clearMouseMove,t)),h.handler(i,"mouseleave",u.proxy(r.clearMouseLeave,t))),a.length&&h.handler(a,"reset",u.proxy(r.resetForm,t),!0),e},_getStars:function(t){for(var e='<span class="'+t+'-stars">',a=1;a<=this.stars;a++)e+='<span class="star">'+this[t+"Star"]+"</span>";return e+"</span>"},_setStars:function(t){var e=this,t=arguments.length?e.calculate(t):e.calculate(),a=e.$element,n=e._parseValue(t.val);return a.val(n),e.$filledStars.css("width",t.width),e._setCaption(t.caption),e.cache=t,a},showStars:function(t){t=this._parseValue(t);return this.$element.val(t),this._setStars()},calculate:function(t){var e=this,a=h.isEmpty(e.$element.val())?0:e.$element.val(),t=arguments.length?e.getValueFromPosition(t):a,a=e.fetchCaption(t),e=e.getWidthFromValue(t);return{caption:a,width:e+="%",val:t}},getValueFromPosition:function(t){var e=this,a=h.getDecimalPlaces(e.step),n=e.$rating.width(),t=e.diff*t/(n*e.step);return t=e.rtl?Math.floor(t):Math.ceil(t),n=h.applyPrecision(parseFloat(e.min+t*e.step),a),n=Math.max(Math.min(n,e.max),e.min),e.rtl?e.max-n:n},getWidthFromValue:function(t){var e,a=this.min,n=this.max,i=this.$emptyStars;return!t||t<=a||a===n?0:(i=(e=i.outerWidth())?i.width()/e:1,n<=t?100:(t-a)*i*100/(n-a))},fetchCaption:function(t){var e=this,t=parseFloat(t)||e.clearValue,a=e.starCaptions,n=e.starCaptionClasses;return t&&t!==e.clearValue&&(t=h.applyPrecision(t,h.getDecimalPlaces(e.step))),n="function"==typeof n?n(t):n[t],a="function"==typeof a?a(t):a[t],a=h.isEmpty(a)?e.defaultCaption.replace(/\{rating}/g,t):a,'<span class="'+(h.isEmpty(n)?e.clearCaptionClass:n)+'">'+(t===e.clearValue?e.clearCaption:a)+"</span>"},destroy:function(){var t=this.$element;return h.isEmpty(this.$container)||this.$container.before(t).remove(),u.removeData(t.get(0)),t.off("rating").removeClass("rating rating-input")},create:function(t){t=t||this.options||{};return this.destroy().rating(t)},clear:function(){var t=this,e='<span class="'+t.clearCaptionClass+'">'+t.clearCaption+"</span>";return t.inactive||t._setCaption(e),t.showStars(t.clearValue).trigger("change").trigger("rating.clear")},reset:function(){return this.showStars(this.initialValue).trigger("rating.reset")},update:function(t){return arguments.length?this.showStars(t):this.$element},refresh:function(t){var e=this.$element;return t?this.destroy().rating(u.extend(!0,this.options,t)).trigger("rating.refresh"):e}},u.fn.rating=function(s){var o=Array.apply(null,arguments),c=[];switch(o.shift(),this.each(function(){var t=u(this),e=t.data("rating"),a="object"==typeof s&&s,n=a.theme||t.data("theme"),i=a.language||t.data("language")||"en",r={},l={};e||(n&&(r=u.fn.ratingThemes[n]||{}),"en"===i||h.isEmpty(u.fn.ratingLocales[i])||(l=u.fn.ratingLocales[i]),n=u.extend(!0,{},u.fn.rating.defaults,r,u.fn.ratingLocales.en,l,a,t.data()),e=new d(this,n),t.data("rating",e)),"string"==typeof s&&c.push(e[s].apply(e,o))}),c.length){case 0:return this;case 1:return void 0===c[0]?this:c[0];default:return c}},u.fn.rating.defaults={theme:"",language:"en",stars:5,filledStar:'<i class="glyphicon glyphicon-star"></i>',emptyStar:'<i class="glyphicon glyphicon-star-empty"></i>',containerClass:"",size:"md",animate:!0,displayOnly:!1,rtl:!1,showClear:!0,showCaption:!0,starCaptionClasses:{.5:"label label-danger",1:"label label-danger",1.5:"label label-warning",2:"label label-warning",2.5:"label label-info",3:"label label-info",3.5:"label label-primary",4:"label label-primary",4.5:"label label-success",5:"label label-success"},clearButton:'<i class="glyphicon glyphicon-minus-sign"></i>',clearButtonBaseClass:"clear-rating",clearButtonActiveClass:"clear-rating-active",clearCaptionClass:"label label-default",clearValue:null,captionElement:null,clearElement:null,hoverEnabled:!0,hoverChangeCaption:!0,hoverChangeStars:!0,hoverOnClear:!0,zeroAsNull:!0},u.fn.ratingLocales.en={defaultCaption:"{rating} Stars",starCaptions:{.5:"Half Star",1:"One Star",1.5:"One & Half Star",2:"Two Stars",2.5:"Two & Half Stars",3:"Three Stars",3.5:"Three & Half Stars",4:"Four Stars",4.5:"Four & Half Stars",5:"Five Stars"},clearButtonTitle:"Clear",clearCaption:"Not Rated"},u.fn.rating.Constructor=d,u(document).ready(function(){var t=u("input.rating");t.length&&t.removeClass("rating-loading").addClass("rating-loading").rating()})});