!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(window.jQuery)}(function(U){"use strict";var j,c;U.fn.fileinputLocales={},U.fn.fileinputThemes={},j={FRAMES:".kv-preview-thumb",SORT_CSS:"file-sortable",STYLE_SETTING:'style="width:{width};height:{height};"',OBJECT_PARAMS:'<param name="controller" value="true" />\n<param name="allowFullScreen" value="true" />\n<param name="allowScriptAccess" value="always" />\n<param name="autoPlay" value="false" />\n<param name="autoStart" value="false" />\n<param name="quality" value="high" />\n',DEFAULT_PREVIEW:'<div class="file-preview-other">\n<span class="{previewFileIconClass}">{previewFileIcon}</span>\n</div>',MODAL_ID:"kvFileinputModal",MODAL_EVENTS:["show","shown","hide","hidden","loaded"],objUrl:window.URL||window.webkitURL,compare:function(e,i,t){return void 0!==e&&(t?e===i:e.match(i))},isIE:function(e){if("Microsoft Internet Explorer"!==navigator.appName)return!1;if(10===e)return new RegExp("msie\\s"+e,"i").test(navigator.userAgent);var i=document.createElement("div");return i.innerHTML="\x3c!--[if IE "+e+"]> <i></i> <![endif]--\x3e",e=i.getElementsByTagName("i").length,document.body.appendChild(i),i.parentNode.removeChild(i),e},initModal:function(e){var i=U("body");i.length&&e.appendTo(i)},isEmpty:function(e,i){return null==e||0===e.length||i&&""===U.trim(e)},isArray:function(e){return Array.isArray(e)||"[object Array]"===Object.prototype.toString.call(e)},ifSet:function(e,i,t){return t=t||"",i&&"object"==typeof i&&e in i?i[e]:t},cleanArray:function(e){return(e=!(e instanceof Array)?[]:e).filter(function(e){return null!=e})},spliceArray:function(e,i){var t,a=0,r=[];if(!(e instanceof Array))return[];for(t=0;t<e.length;t++)t!==i&&(r[a]=e[t],a++);return r},getNum:function(e,i){return i=i||0,"number"==typeof e?e:("string"==typeof e&&(e=parseFloat(e)),isNaN(e)?i:e)},hasFileAPISupport:function(){return!(!window.File||!window.FileReader)},hasDragDropSupport:function(){var e=document.createElement("div");return!j.isIE(9)&&(void 0!==e.draggable||void 0!==e.ondragstart&&void 0!==e.ondrop)},hasFileUploadSupport:function(){return j.hasFileAPISupport()&&window.FormData},addCss:function(e,i){e.removeClass(i).addClass(i)},getElement:function(e,i,t){return j.isEmpty(e)||j.isEmpty(e[i])?t:U(e[i])},uniqId:function(){return Math.round((new Date).getTime()+100*Math.random())},htmlEncode:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},replaceTags:function(e,i){var t=e;return i&&U.each(i,function(e,i){"function"==typeof i&&(i=i()),t=t.split(e).join(i)}),t},cleanMemory:function(e){e=(e.is("img")?e:e.find("source")).attr("src");j.objUrl.revokeObjectURL(e)},findFileName:function(e){var i=e.lastIndexOf("/");return-1===i&&(i=e.lastIndexOf("\\")),e.split(e.substring(i,i+1)).pop()},checkFullScreen:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},toggleFullScreen:function(e){var i=document,t=i.documentElement;t&&e&&!j.checkFullScreen()?t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):i.exitFullscreen?i.exitFullscreen():i.msExitFullscreen?i.msExitFullscreen():i.mozCancelFullScreen?i.mozCancelFullScreen():i.webkitExitFullscreen&&i.webkitExitFullscreen()},moveArray:function(e,i,t){if(t>=e.length)for(var a=t-e.length;1+a--;)e.push(void 0);return e.splice(t,0,e.splice(i,1)[0]),e},cleanZoomCache:function(e){var i=e.closest(".kv-zoom-cache-theme");(i=!i.length?e.closest(".kv-zoom-cache"):i).remove()}},(c=function(e,i){var t=this;t.$element=U(e),t._validate()&&(t.isPreviewable=j.hasFileAPISupport(),t.isIE9=j.isIE(9),t.isIE10=j.isIE(10),t.isPreviewable||t.isIE9?(t._init(i),t._listen()):t.$element.removeClass("file-loading"))}).prototype={constructor:c,_init:function(e){var i,t=this,a=t.$element;t.options=e,U.each(e,function(e,i){switch(e){case"minFileCount":case"maxFileCount":case"minFileSize":case"maxFileSize":case"maxFilePreviewSize":case"resizeImageQuality":case"resizeIfSizeMoreThan":case"progressUploadThreshold":case"initialPreviewCount":case"zoomModalHeight":case"minImageHeight":case"maxImageHeight":case"minImageWidth":case"maxImageWidth":t[e]=j.getNum(i);break;default:t[e]=i}}),t.$form=a.closest("form"),t._initTemplateDefaults(),t.fileInputCleared=!1,t.fileBatchCompleted=!0,t.isPreviewable||(t.showPreview=!1),t.uploadFileAttr=j.isEmpty(a.attr("name"))?"file_data":a.attr("name"),t.reader=null,t.formdata={},t.clearStack(),t.uploadCount=0,t.uploadStatus={},t.uploadLog=[],t.uploadAsyncCount=0,t.loadedImages=[],t.totalImagesCount=0,t.ajaxRequests=[],t.isError=!1,t.ajaxAborted=!1,t.cancelling=!1,i=t._getLayoutTemplate("progress"),t.progressTemplate=i.replace("{class}",t.progressClass),t.progressCompleteTemplate=i.replace("{class}",t.progressCompleteClass),t.progressErrorTemplate=i.replace("{class}",t.progressErrorClass),t.dropZoneEnabled=j.hasDragDropSupport()&&t.dropZoneEnabled,t.isDisabled=a.attr("disabled")||a.attr("readonly"),t.isDisabled&&a.attr("disabled",!0),t.isUploadable=j.hasFileUploadSupport()&&!j.isEmpty(t.uploadUrl),t.isClickable=t.browseOnZoneClick&&t.showPreview&&(t.isUploadable&&t.dropZoneEnabled||!j.isEmpty(t.defaultPreviewContent)),t.slug="function"==typeof e.slugCallback?e.slugCallback:t._slugDefault,t.mainTemplate=t.showCaption?t._getLayoutTemplate("main1"):t._getLayoutTemplate("main2"),t.captionTemplate=t._getLayoutTemplate("caption"),t.previewGenericTemplate=t._getPreviewTemplate("generic"),t.resizeImage&&(t.maxImageWidth||t.maxImageHeight)&&(t.imageCanvas=document.createElement("canvas"),t.imageCanvasContext=t.imageCanvas.getContext("2d")),j.isEmpty(a.attr("id"))&&a.attr("id",j.uniqId()),t.namespace=".fileinput_"+a.attr("id").replace(/-/g,"_"),void 0===t.$container?t.$container=t._createContainer():t._refreshContainer(),i=t.$container,t.$dropZone=i.find(".file-drop-zone"),t.$progress=i.find(".kv-upload-progress"),t.$btnUpload=i.find(".fileinput-upload"),t.$captionContainer=j.getElement(e,"elCaptionContainer",i.find(".file-caption")),t.$caption=j.getElement(e,"elCaptionText",i.find(".file-caption-name")),t.$previewContainer=j.getElement(e,"elPreviewContainer",i.find(".file-preview")),t.$preview=j.getElement(e,"elPreviewImage",i.find(".file-preview-thumbnails")),t.$previewStatus=j.getElement(e,"elPreviewStatus",i.find(".file-preview-status")),t.$errorContainer=j.getElement(e,"elErrorContainer",t.$previewContainer.find(".kv-fileinput-error")),j.isEmpty(t.msgErrorClass)||j.addCss(t.$errorContainer,t.msgErrorClass),t.$errorContainer.hide(),t.previewInitId="preview-"+j.uniqId(),t._initPreviewCache(),t._initPreview(!0),t._initPreviewActions(),t._setFileDropZoneTitle(),a.removeClass("file-loading"),a.attr("disabled")&&t.disable(),t._initZoom()},_initTemplateDefaults:function(){var t=this,e='<div id="'+j.MODAL_ID+'" class="file-zoom-dialog modal fade" tabindex="-1" aria-labelledby="'+j.MODAL_ID+'Label"></div>',i='<div class="kv-preview-data file-preview-html" title="{caption}" '+j.STYLE_SETTING+">{data}</div>\n",a='<img src="{data}" class="file-preview-image kv-preview-data" title="{caption}" alt="{caption}" '+j.STYLE_SETTING+">\n",r='<textarea class="kv-preview-data file-preview-text" title="{caption}" readonly '+j.STYLE_SETTING+">{data}</textarea>\n",n='<video class="kv-preview-data file-preview-video" width="{width}" height="{height}" controls>\n<source src="{data}" type="{type}">\n'+j.DEFAULT_PREVIEW+"\n</video>\n",o='<div class="file-preview-audio"><audio class="kv-preview-data" controls>\n<source src="{data}" type="{type}">\n'+j.DEFAULT_PREVIEW+"\n</audio></div>\n",l='<object class="kv-preview-data file-object" type="application/x-shockwave-flash" width="{width}" height="{height}" data="{data}">\n'+j.OBJECT_PARAMS+" "+j.DEFAULT_PREVIEW+"\n</object>\n",s='<object class="kv-preview-data file-object {typeCss}" data="{data}" type="{type}" width="{width}" height="{height}">\n<param name="movie" value="{caption}" />\n'+j.OBJECT_PARAMS+" "+j.DEFAULT_PREVIEW+"\n</object>\n",c='<div class="kv-preview-data file-preview-other-frame">\n'+j.DEFAULT_PREVIEW+"\n</div>\n",d={width:"100%",height:"100%","min-height":"480px"};t.defaults={layoutTemplates:{main1:'{preview}\n<div class="kv-upload-progress hide"></div>\n<div class="input-group {class}">\n   {caption}\n   <div class="input-group-btn">\n       {remove}\n       {cancel}\n       {upload}\n       {browse}\n   </div>\n</div>',main2:'{preview}\n<div class="kv-upload-progress hide"></div>\n{remove}\n{cancel}\n{upload}\n{browse}\n',preview:'<div class="file-preview {class}">\n    {close}    <div class="{dropClass}">\n    <div class="file-preview-thumbnails">\n    </div>\n    <div class="clearfix"></div>    <div class="file-preview-status text-center text-success"></div>\n    <div class="kv-fileinput-error"></div>\n    </div>\n</div>',close:'<div class="close fileinput-remove">&times;</div>\n',fileIcon:'<i class="fa fa-folder kv-caption-icon"></i>',caption:'<div tabindex="500" class="form-control file-caption {class}">\n   <div class="file-caption-name"></div>\n</div>\n',modalMain:e,modal:'<div class="modal-dialog modal-lg" role="document">\n  <div class="modal-content">\n    <div class="modal-header">\n      <div class="kv-zoom-actions pull-right">{toggleheader}{fullscreen}{borderless}{close}</div>\n      <h3 class="modal-title">{heading} <small><span class="kv-zoom-title"></span></small></h3>\n    </div>\n    <div class="modal-body">\n      <div class="floating-buttons"></div>\n      <div class="kv-zoom-body file-zoom-content {zoomFrameClass}"></div>\n{prev} {next}\n    </div>\n  </div>\n</div>\n',progress:'<div class="progress">\n    <div class="{class}" role="progressbar" aria-valuenow="{percent}" aria-valuemin="0" aria-valuemax="100" style="width:{percent}%;">\n        {status}\n     </div>\n</div>',size:" <samp>({sizeText})</samp>",footer:'<div class="file-thumbnail-footer">\n    <div class="file-footer-caption" title="{caption}">{caption}<br>{size}</div>\n    {progress} {actions}\n</div>',actions:'<div class="file-upload-indicator" title="{indicatorTitle}">{indicator}</div>\n{drag}\n<div class="file-actions">\n    <div class="file-footer-buttons">\n        {upload} {delete} {zoom} {other}    </div>\n    <div class="clearfix"></div>\n</div>',actionDelete:'<button type="button" class="kv-file-remove {removeClass}" title="{removeTitle}" {dataUrl}{dataKey}>{removeIcon}</button>\n',actionUpload:'<button type="button" class="kv-file-upload {uploadClass}" title="{uploadTitle}">{uploadIcon}</button>',actionZoom:'<button type="button" class="kv-file-zoom {zoomClass}" title="{zoomTitle}">{zoomIcon}</button>',actionDrag:'<span class="file-drag-handle {dragClass}" title="{dragTitle}">{dragIcon}</span>',btnDefault:'<button type="{type}" tabindex="500" title="{title}" class="{css}" {status}>{icon} {label}</button>',btnLink:'<a href="{href}" tabindex="500" title="{title}" class="{css}" {status}>{icon} {label}</a>',btnBrowse:'<div tabindex="500" class="{css}" {status}>{icon} {label}</div>',zoomCache:'<div class="kv-zoom-cache" style="display:none">{zoomContent}</div>'},previewMarkupTags:{tagBefore1:'<div class="file-preview-frame {frameClass}" id="{previewId}" data-fileindex="{fileindex}" data-template="{template}"><div class="kv-file-content">\n',tagBefore2:'<div class="file-preview-frame {frameClass}" id="{previewId}" data-fileindex="{fileindex}" data-template="{template}" title="{caption}"><div class="kv-file-content">\n',tagAfter:"</div>{footer}\n</div>\n"},previewContentTemplates:{generic:"{content}\n",html:i,image:a,text:r,video:n,audio:o,flash:l,object:s,pdf:'<embed class="kv-preview-data" src="{data}" width="{width}" height="{height}" type="application/pdf">\n',other:c},allowedPreviewTypes:["image","html","text","video","audio","flash","pdf","object"],previewTemplates:{},previewSettings:{image:{width:"auto",height:"160px"},html:{width:"213px",height:"160px"},text:{width:"213px",height:"160px"},video:{width:"auto",height:"100%","max-width":"100%"},audio:{width:"100%",height:"30px"},flash:{width:"auto",height:"100%","max-width":"100%"},object:{height:"100%"},pdf:{width:"160px",height:"160px"},other:{width:"160px",height:"160px"}},previewZoomSettings:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:d,text:d,video:{width:"auto",height:"100%","max-width":"100%"},audio:{width:"100%",height:"30px"},flash:{width:"auto",height:"480px"},object:{width:"auto",height:"100%","max-width":"100%","min-height":"480px"},pdf:d,other:{width:"auto",height:"100%","min-height":"480px"}},fileTypeSettings:{image:function(e,i){return j.compare(e,"image.*")||j.compare(i,/\.(gif|png|jpe?g)$/i)},html:function(e,i){return j.compare(e,"text/html")||j.compare(i,/\.(htm|html)$/i)},text:function(e,i){return j.compare(e,"text.*")||j.compare(i,/\.(xml|javascript)$/i)||j.compare(i,/\.(txt|md|csv|nfo|ini|json|php|js|css)$/i)},video:function(e,i){return j.compare(e,"video.*")&&(j.compare(e,/(ogg|mp4|mp?g|mov|webm|3gp)$/i)||j.compare(i,/\.(og?|mp4|webm|mp?g|mov|3gp)$/i))},audio:function(e,i){return j.compare(e,"audio.*")&&(j.compare(i,/(ogg|mp3|mp?g|wav)$/i)||j.compare(i,/\.(og?|mp3|mp?g|wav)$/i))},flash:function(e,i){return j.compare(e,"application/x-shockwave-flash",!0)||j.compare(i,/\.(swf)$/i)},pdf:function(e,i){return j.compare(e,"application/pdf",!0)||j.compare(i,/\.(pdf)$/i)},object:function(){return!0},other:function(){return!0}},fileActionSettings:{showRemove:!0,showUpload:!0,showZoom:!0,showDrag:!0,removeIcon:'<i class="glyphicon glyphicon-trash text-danger"></i>',removeClass:"btn btn-xs btn-default",removeTitle:"Remove file",uploadIcon:'<i class="glyphicon glyphicon-upload text-info"></i>',uploadClass:"btn btn-xs btn-default",uploadTitle:"Upload file",zoomIcon:'<i class="glyphicon glyphicon-zoom-in"></i>',zoomClass:"btn btn-xs btn-default",zoomTitle:"View Details",dragIcon:'<i class="glyphicon glyphicon-menu-hamburger"></i>',dragClass:"text-info",dragTitle:"Move / Rearrange",dragSettings:{},indicatorNew:'<i class="glyphicon glyphicon-hand-down text-warning"></i>',indicatorSuccess:'<i class="glyphicon glyphicon-ok-sign text-success"></i>',indicatorError:'<i class="glyphicon glyphicon-exclamation-sign text-danger"></i>',indicatorLoading:'<i class="glyphicon glyphicon-hand-up text-muted"></i>',indicatorNewTitle:"Not uploaded yet",indicatorSuccessTitle:"Uploaded",indicatorErrorTitle:"Upload Error",indicatorLoadingTitle:"Uploading ..."}},U.each(t.defaults,function(e,i){return"allowedPreviewTypes"===e?void(void 0===t.allowedPreviewTypes&&(t.allowedPreviewTypes=i)):void(t[e]=U.extend(!0,{},i,t[e]))}),t._initPreviewTemplates()},_initPreviewTemplates:function(){var t,a=this,e=a.defaults,r=a.previewMarkupTags,n=r.tagAfter;U.each(e.previewContentTemplates,function(e,i){j.isEmpty(a.previewTemplates[e])&&(t=r.tagBefore2,"generic"!==e&&"image"!==e&&"html"!==e&&"text"!==e||(t=r.tagBefore1),a.previewTemplates[e]=t+i+n)})},_initPreviewCache:function(){var f=this;f.previewCache={data:{},init:function(){var e=f.initialPreview;0<e.length&&!j.isArray(e)&&(e=e.split(f.initialPreviewDelimiter)),f.previewCache.data={content:e,config:f.initialPreviewConfig,tags:f.initialPreviewThumbTags}},fetch:function(){return f.previewCache.data.content.filter(function(e){return null!==e})},count:function(e){return f.previewCache.data&&f.previewCache.data.content?(e?f.previewCache.data.content:f.previewCache.fetch()).length:0},get:function(e,i){function c(e,i,t,a,r,n,o,l,s){return l=" file-preview-initial "+j.SORT_CSS+(l?" "+l:""),f._generatePreviewTemplate(e,i,t,a,r,!1,null,l,n,o,s)}var t,a,r,n,p="init_"+e,o=f.previewCache.data,l=o.config[e],s=o.content[e],u=f.previewInitId+"-"+p,d=j.ifSet("previewAsData",l,f.initialPreviewAsData);return s?(i=void 0===i||i,t=j.ifSet("type",l,f.initialPreviewFileType||"generic"),a=j.ifSet("filename",l,j.ifSet("caption",l)),r=j.ifSet("filetype",l,t),i=f.previewCache.footer(e,i,l&&l.size||null),n=j.ifSet("frameClass",l),d=d?c(t,s,a,r,u,i,p,n):c("generic",s,a,r,u,i,p,n,t).replace(/\{content}/g,o.content[e]),o.tags.length&&o.tags[e]&&(d=j.replaceTags(d,o.tags[e])),j.isEmpty(l)||j.isEmpty(l.frameAttr)||((s=U(document.createElement("div")).html(d)).find(".file-preview-initial").attr(l.frameAttr),d=s.html(),s.remove()),d):""},add:function(e,i,t,a){var r,n=f.previewCache.data;return j.isArray(e)||(e=e.split(f.initialPreviewDelimiter)),a?(r=n.content.push(e)-1,n.config[r]=i,n.tags[r]=t):(r=e.length-1,n.content=e,n.config=i,n.tags=t),f.previewCache.data=n,r},set:function(e,i,t,a){var r,n=f.previewCache.data;if(e&&e.length&&(e=!j.isArray(e)?e.split(f.initialPreviewDelimiter):e).filter(function(e){return null!==e}).length){if(void 0===n.content&&(n.content=[]),void 0===n.config&&(n.config=[]),void 0===n.tags&&(n.tags=[]),a){for(r=0;r<e.length;r++)e[r]&&n.content.push(e[r]);for(r=0;r<i.length;r++)i[r]&&n.config.push(i[r]);for(r=0;r<t.length;r++)t[r]&&n.tags.push(t[r])}else n.content=e,n.config=i,n.tags=t;f.previewCache.data=n}},unset:function(e){var i=f.previewCache.count();if(i){if(1===i)return f.previewCache.data.content=[],f.previewCache.data.config=[],f.previewCache.data.tags=[],f.initialPreview=[],f.initialPreviewConfig=[],void(f.initialPreviewThumbTags=[]);f.previewCache.data.content[e]=null,f.previewCache.data.config[e]=null,f.previewCache.data.tags[e]=null}},out:function(){var e,i="",t=f.previewCache.count(!0);if(0===t)return{content:"",caption:""};for(e=0;e<t;e++)i+=f.previewCache.get(e);return{content:i,caption:f._getMsgSelected(f.previewCache.count())}},footer:function(e,i,t){var a=f.previewCache.data;if(!a||!a.config||0===a.config.length||j.isEmpty(a.config[e]))return"";i=void 0===i||i;var a=a.config[e],e=j.ifSet("caption",a),r="",n=j.ifSet("width",a,"auto"),o=j.ifSet("url",a,!1),l=j.ifSet("key",a,null),s=f.fileActionSettings,d=j.ifSet("showDelete",a,!0),c=j.ifSet("showZoom",a,s.showZoom),a=j.ifSet("showDrag",a,s.showDrag);return f.initialPreviewShowDelete&&(r=f._renderFileActions(!1,d,c,a,!1===o&&i,o,l,!0)),f._getLayoutTemplate("footer").replace(/\{progress}/g,f._renderThumbProgress()).replace(/\{actions}/g,r).replace(/\{caption}/g,e).replace(/\{size}/g,f._getSize(t)).replace(/\{width}/g,n).replace(/\{indicator}/g,"").replace(/\{indicatorTitle}/g,"")}},f.previewCache.init()},_handler:function(e,i,t){var a=this.namespace,i=i.split(" ").join(a+" ")+a;e&&e.length&&e.off(i).on(i,t)},_log:function(e){var i=this.$element.attr("id");i&&(e='"'+i+'": '+e),void 0!==window.console.log?window.console.log(e):window.alert(e)},_validate:function(){var e="file"===this.$element.attr("type");return e||this._log('The input "type" must be set to "file" for initializing the "bootstrap-fileinput" plugin.'),e},_errorsExist:function(){var e;return!!this.$errorContainer.find("li").length||((e=U(document.createElement("div")).html(this.$errorContainer.html())).find("span.kv-error-close").remove(),e.find("ul").remove(),!!U.trim(e.text()).length)},_errorHandler:function(e,i){var t=this,e=e.target.error;e.code===e.NOT_FOUND_ERR?t._showError(t.msgFileNotFound.replace("{name}",i)):e.code===e.SECURITY_ERR?t._showError(t.msgFileSecured.replace("{name}",i)):e.code===e.NOT_READABLE_ERR?t._showError(t.msgFileNotReadable.replace("{name}",i)):e.code===e.ABORT_ERR?t._showError(t.msgFilePreviewAborted.replace("{name}",i)):t._showError(t.msgFilePreviewError.replace("{name}",i))},_addError:function(e){var i=this.$errorContainer;e&&i.length&&(i.html(this.errorCloseButton+e),this._handler(i.find(".kv-error-close"),"click",function(){i.fadeOut("slow")}))},_resetErrors:function(e){var i=this.$errorContainer;this.isError=!1,this.$container.removeClass("has-error"),i.html(""),e?i.fadeOut("slow"):i.hide()},_showFolderError:function(e){var i,t=this,a=t.$errorContainer;e&&(i=t.msgFoldersNotAllowed.replace(/\{n}/g,e),t._addError(i),j.addCss(t.$container,"has-error"),a.fadeIn(800),t._raise("filefoldererror",[e,i]))},_showUploadError:function(e,i,t){var a=this,r=a.$errorContainer,t=t||"fileuploaderror",n=i&&i.id?'<li data-file-id="'+i.id+'">'+e+"</li>":"<li>"+e+"</li>";return 0===r.find("ul").length?a._addError("<ul>"+n+"</ul>"):r.find("ul").append(n),r.fadeIn(800),a._raise(t,[i,e]),a.$container.removeClass("file-input-new"),j.addCss(a.$container,"has-error"),!0},_showError:function(e,i,t){var a=this,r=a.$errorContainer,t=t||"fileerror";return(i=i||{}).reader=a.reader,a._addError(e),r.fadeIn(800),a._raise(t,[i,e]),a.isUploadable||a._clearFileInput(),a.$container.removeClass("file-input-new"),j.addCss(a.$container,"has-error"),a.$btnUpload.attr("disabled",!0),!0},_noFilesError:function(e){var i=this,t=1<i.minFileCount?i.filePlural:i.fileSingle,t=i.msgFilesTooLess.replace("{n}",i.minFileCount).replace("{files}",t),a=i.$errorContainer;i._addError(t),i.isError=!0,i._updateFileDetails(0),a.fadeIn(800),i._raise("fileerror",[e,t]),i._clearFileInput(),j.addCss(i.$container,"has-error")},_parseError:function(e,i,t,a){var r=this,t=U.trim(t+""),n="."===t.slice(-1)?"":".",i=void 0!==i.responseJSON&&void 0!==i.responseJSON.error?i.responseJSON.error:i.responseText;return r.cancelling&&r.msgUploadAborted&&(t=r.msgUploadAborted),r.showAjaxErrorDetails&&i?t+=n+(i=0<(i=U.trim(i.replace(/\n\s*\n/g,"\n"))).length?"<pre>"+i+"</pre>":""):t+=n,t===n&&(t=r.msgAjaxError.replace("{operation}",e)),r.cancelling=!1,a?"<b>"+a+": </b>"+t:t},_parseFileType:function(e){for(var i,t=this.allowedPreviewTypes||[],a=0;a<t.length;a++)if(i=t[a],i=(0,this.fileTypeSettings[i])(e.type,e.name)?i:"",!j.isEmpty(i))return i;return"other"},_getPreviewIcon:function(e){var t,a=this,r=null;return e&&-1<e.indexOf(".")&&(t=e.split(".").pop(),a.previewFileIconSettings&&a.previewFileIconSettings[t]&&(r=a.previewFileIconSettings[t]),a.previewFileExtSettings&&U.each(a.previewFileExtSettings,function(e,i){return a.previewFileIconSettings[e]&&i(t)?void(r=a.previewFileIconSettings[e]):void 0})),r},_parseFilePreviewIcon:function(e,i){i=this._getPreviewIcon(i)||this.previewFileIcon;return e=-1<e.indexOf("{previewFileIcon}")?e.replace(/\{previewFileIconClass}/g,this.previewFileIconClass).replace(/\{previewFileIcon}/g,i):e},_raise:function(e,i){var t=U.Event(e);if(void 0!==i?this.$element.trigger(t,i):this.$element.trigger(t),t.isDefaultPrevented()||!1===t.result)return!1;switch(e){case"filebatchuploadcomplete":case"filebatchuploadsuccess":case"fileuploaded":case"fileclear":case"filecleared":case"filereset":case"fileerror":case"filefoldererror":case"fileuploaderror":case"filebatchuploaderror":case"filedeleteerror":case"filecustomerror":case"filesuccessremove":break;default:this.ajaxAborted=t.result}return!0},_listenFullScreen:function(e){var i,t,a=this.$modal;a&&a.length&&(i=a&&a.find(".btn-fullscreen"),t=a&&a.find(".btn-borderless"),i.length&&t.length&&(i.removeClass("active").attr("aria-pressed","false"),t.removeClass("active").attr("aria-pressed","false"),(e?i:t).addClass("active").attr("aria-pressed","true"),a.hasClass("file-zoom-fullscreen")||e?this._maximizeZoomDialog():t.removeClass("active").attr("aria-pressed","false")))},_listen:function(){var e=this,i=e.$element,t=e.$form,a=e.$container;e._handler(i,"change",U.proxy(e._change,e)),e.showBrowse&&e._handler(e.$btnFile,"click",U.proxy(e._browse,e)),e._handler(a.find(".fileinput-remove:not([disabled])"),"click",U.proxy(e.clear,e)),e._handler(a.find(".fileinput-cancel"),"click",U.proxy(e.cancel,e)),e._initDragDrop(),e._handler(t,"reset",U.proxy(e.reset,e)),e.isUploadable||e._handler(t,"submit",U.proxy(e._submitForm,e)),e._handler(e.$container.find(".fileinput-upload"),"click",U.proxy(e._uploadClick,e)),e._handler(U(window),"resize",function(){e._listenFullScreen(screen.width===window.innerWidth&&screen.height===window.innerHeight)}),e._handler(U(document),"webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(){e._listenFullScreen(j.checkFullScreen())}),e._initClickable()},_initClickable:function(){var i,t=this;t.isClickable&&(i=t.isUploadable?t.$dropZone:t.$preview.find(".file-default-preview"),j.addCss(i,"clickable"),i.attr("tabindex",-1),t._handler(i,"click",function(e){e=U(e.target);e.parents(".file-preview-thumbnails").length&&!e.parents(".file-default-preview").length||(t.$element.trigger("click"),i.blur())}))},_initDragDrop:function(){var e=this,i=e.$dropZone;e.isUploadable&&e.dropZoneEnabled&&e.showPreview&&(e._handler(i,"dragenter dragover",U.proxy(e._zoneDragEnter,e)),e._handler(i,"dragleave",U.proxy(e._zoneDragLeave,e)),e._handler(i,"drop",U.proxy(e._zoneDrop,e)),e._handler(U(document),"dragenter dragover drop",e._zoneDragDropInit))},_zoneDragDropInit:function(e){e.stopPropagation(),e.preventDefault()},_zoneDragEnter:function(e){var i=-1<U.inArray("Files",e.originalEvent.dataTransfer.types);return this._zoneDragDropInit(e),this.isDisabled||!i?(e.originalEvent.dataTransfer.effectAllowed="none",void(e.originalEvent.dataTransfer.dropEffect="none")):void j.addCss(this.$dropZone,"file-highlighted")},_zoneDragLeave:function(e){this._zoneDragDropInit(e),this.isDisabled||this.$dropZone.removeClass("file-highlighted")},_zoneDrop:function(e){e.preventDefault(),this.isDisabled||j.isEmpty(e.originalEvent.dataTransfer.files)||(this._change(e,"dragdrop"),this.$dropZone.removeClass("file-highlighted"))},_uploadClick:function(e){var i=this.$container.find(".fileinput-upload"),t=!i.hasClass("disabled")&&j.isEmpty(i.attr("disabled"));e&&e.isDefaultPrevented()||(this.isUploadable?(e.preventDefault(),t&&this.upload()):t&&"submit"!==i.attr("type")&&((t=i.closest("form")).length&&t.trigger("submit"),e.preventDefault()))},_submitForm:function(){var e=this,i=e.$element.get(0).files;return i&&0<e.minFileCount&&e._getFileCount(i.length)<e.minFileCount?(e._noFilesError({}),!1):!e._abort({})},_clearPreview:function(){var e=this,i=e.$preview;(e.showUploadedThumbs?i.find(j.FRAMES+":not(.file-preview-success)"):i.find(j.FRAMES)).each(function(){var e=U(this);e.remove(),j.cleanZoomCache(i.find("#zoom-"+e.attr("id")))}),e.$preview.find(j.FRAMES).length&&e.showPreview||e._resetUpload(),e._validateDefaultPreview()},_initSortable:function(){var n=this,e=n.$preview,i="."+j.SORT_CSS;window.KvSortable&&0!==e.find(i).length&&(i={handle:".drag-handle-init",dataIdAttr:"data-preview-id",draggable:i,onSort:function(e){var i,t=e.oldIndex,a=e.newIndex;n.initialPreview=j.moveArray(n.initialPreview,t,a),n.initialPreviewConfig=j.moveArray(n.initialPreviewConfig,t,a),n.previewCache.init();for(var r=0;r<n.initialPreviewConfig.length;r++)null!==n.initialPreviewConfig[r]&&(i=n.initialPreviewConfig[r].key,U(".kv-file-remove[data-key='"+i+"']").closest(j.FRAMES).attr("data-fileindex","init_"+r).data("fileindex","init_"+r));n._raise("filesorted",{previewId:U(e.item).attr("id"),oldIndex:t,newIndex:a,stack:n.initialPreviewConfig})}},e.data("kvsortable")&&e.kvsortable("destroy"),U.extend(!0,i,n.fileActionSettings.dragSettings),e.kvsortable(i))},_initPreview:function(e){var i,t=this,a=t.initialCaption||"";return t.previewCache.count()?(i=t.previewCache.out(),a=e&&t.initialCaption?t.initialCaption:i.caption,t.$preview.html(i.content),t._setInitThumbAttr(),t._setCaption(a),t._initSortable(),void(j.isEmpty(i.content)||t.$container.removeClass("file-input-new"))):(t._clearPreview(),void(e?t._setCaption(a):t._initCaption()))},_getZoomButton:function(e){var i=this.previewZoomButtonIcons[e],t=this.previewZoomButtonClasses[e],a=' title="'+(this.previewZoomButtonTitles[e]||"")+'" '+("close"===e?' data-dismiss="modal" aria-hidden="true"':"");return"fullscreen"!==e&&"borderless"!==e&&"toggleheader"!==e||(a+=' data-toggle="button" aria-pressed="false" autocomplete="off"'),'<button type="button" class="'+t+" btn-"+e+'"'+a+">"+i+"</button>"},_getModalContent:function(){var e=this;return e._getLayoutTemplate("modal").replace(/\{zoomFrameClass}/g,e.frameClass).replace(/\{heading}/g,e.msgZoomModalHeading).replace(/\{prev}/g,e._getZoomButton("prev")).replace(/\{next}/g,e._getZoomButton("next")).replace(/\{toggleheader}/g,e._getZoomButton("toggleheader")).replace(/\{fullscreen}/g,e._getZoomButton("fullscreen")).replace(/\{borderless}/g,e._getZoomButton("borderless")).replace(/\{close}/g,e._getZoomButton("close"))},_listenModalEvent:function(a){var r=this,n=r.$modal;n.on(a+".bs.modal",function(e){var i=n.find(".btn-fullscreen"),t=n.find(".btn-borderless");r._raise("filezoom"+a,{sourceEvent:e,previewId:n.data("previewId"),modal:n}),"shown"===a&&(t.removeClass("active").attr("aria-pressed","false"),i.removeClass("active").attr("aria-pressed","false"),n.hasClass("file-zoom-fullscreen")&&(r._maximizeZoomDialog(),(j.checkFullScreen()?i:t).addClass("active").attr("aria-pressed","true")))})},_initZoom:function(){var t=this,e=t._getLayoutTemplate("modalMain"),i="#"+j.MODAL_ID;t.showPreview&&(t.$modal=U(i),t.$modal&&t.$modal.length||(e=U(document.createElement("div")).html(e).insertAfter(t.$container),t.$modal=U(i).insertBefore(e),e.remove()),j.initModal(t.$modal),t.$modal.html(t._getModalContent()),U.each(j.MODAL_EVENTS,function(e,i){t._listenModalEvent(i)}))},_initZoomButtons:function(){var e,i=this.$modal.data("previewId")||"",t=this.$preview.find(j.FRAMES).toArray(),a=t.length,r=this.$modal.find(".btn-prev"),n=this.$modal.find(".btn-next");return t.length<2?(r.hide(),void n.hide()):(r.show(),n.show(),void(a&&(e=U(t[0]),t=U(t[a-1]),r.removeAttr("disabled"),n.removeAttr("disabled"),e.length&&e.attr("id")===i&&r.attr("disabled",!0),t.length&&t.attr("id")===i&&n.attr("disabled",!0))))},_maximizeZoomDialog:function(){var e=this.$modal,i=e.find(".modal-header:visible"),t=e.find(".modal-footer:visible"),a=e.find(".modal-body"),r=U(window).height();e.addClass("file-zoom-fullscreen"),i&&i.length&&(r-=i.outerHeight(!0)),t&&t.length&&(r-=t.outerHeight(!0)),a&&a.length&&(r-=a.outerHeight(!0)-a.height()),e.find(".kv-zoom-body").height(r)},_resizeZoomDialog:function(e){var i=this,t=i.$modal,a=t.find(".btn-fullscreen"),r=t.find(".btn-borderless");if(t.hasClass("file-zoom-fullscreen"))j.toggleFullScreen(!1),e?a.hasClass("active")||(t.removeClass("file-zoom-fullscreen"),i._resizeZoomDialog(!0),r.hasClass("active")&&r.removeClass("active").attr("aria-pressed","false")):a.hasClass("active")?a.removeClass("active").attr("aria-pressed","false"):(t.removeClass("file-zoom-fullscreen"),i.$modal.find(".kv-zoom-body").css("height",i.zoomModalHeight));else{if(!e)return void i._maximizeZoomDialog();j.toggleFullScreen(!0)}t.focus()},_setZoomContent:function(e,c){var i,t,a,n=this,r=e.attr("id"),o=n.$modal,l=o.find(".btn-prev"),s=o.find(".btn-next"),p=o.find(".btn-fullscreen"),u=o.find(".btn-borderless"),f=o.find(".btn-toggleheader"),d=n.$preview.find("#zoom-"+r),m=d.attr("data-template")||"generic",d=d.find(".kv-file-content"),d=d.length?d.html():"",e=(e.data("caption")||"")+" "+(e.data("size")||"");o.find(".kv-zoom-title").html(e),i=o.find(".kv-zoom-body"),o.removeClass("kv-single-content"),c?(a=i.addClass("file-thumb-loading").clone().insertAfter(i),i.html(d).hide(),a.fadeOut("fast",function(){i.fadeIn("fast",function(){i.removeClass("file-thumb-loading")}),a.remove()})):i.html(d),(e=n.previewZoomSettings[m])&&(t=i.find(".kv-preview-data"),j.addCss(t,"file-zoom-detail"),U.each(e,function(e,i){t.css(e,i),(t.attr("width")&&"width"===e||t.attr("height")&&"height"===e)&&t.removeAttr(e)})),o.data("previewId",r),n._handler(l,"click",function(){n._zoomSlideShow("prev",r)}),n._handler(s,"click",function(){n._zoomSlideShow("next",r)}),n._handler(p,"click",function(){n._resizeZoomDialog(!0)}),n._handler(u,"click",function(){n._resizeZoomDialog(!1)}),n._handler(f,"click",function(){function e(e){var i=n.$modal.find(".kv-zoom-body"),t=n.zoomModalHeight;o.hasClass("file-zoom-fullscreen")&&(t=i.outerHeight(!0),e||(t-=a.outerHeight(!0))),i.css("height",e?t+e:t)}var i,a=o.find(".modal-header"),t=o.find(".modal-body .floating-buttons"),r=a.find(".kv-zoom-actions");a.is(":visible")?(i=a.outerHeight(!0),a.slideUp("slow",function(){r.find(".btn").appendTo(t),e(i)})):(t.find(".btn").appendTo(r),a.slideDown("slow",function(){e()})),o.focus()}),n._handler(o,"keydown",function(e){e=e.which||e.keyCode;37!==e||l.attr("disabled")||n._zoomSlideShow("prev",r),39!==e||s.attr("disabled")||n._zoomSlideShow("next",r)})},_zoomPreview:function(e){var i=this.$modal;if(!e.length)throw"Cannot zoom to detailed preview!";j.initModal(i),i.html(this._getModalContent()),e=e.closest(j.FRAMES),this._setZoomContent(e),i.modal("show"),this._initZoomButtons()},_zoomSlideShow:function(e,i){var t,a,r=this,n=r.$modal.find(".kv-zoom-actions .btn-"+e),o=r.$preview.find(j.FRAMES).toArray(),l=o.length;if(!n.attr("disabled")){for(t=0;t<l;t++)if(U(o[t]).attr("id")===i){a="prev"===e?t-1:t+1;break}a<0||l<=a||!o[a]||((n=U(o[a])).length&&r._setZoomContent(n,!0),r._initZoomButtons(),r._raise("filezoom"+e,{previewId:i,modal:r.$modal}))}},_initZoomButton:function(){var i=this;i.$preview.find(".kv-file-zoom").each(function(){var e=U(this);i._handler(e,"click",function(){i._zoomPreview(e)})})},_clearObjects:function(e){e.find("video audio").each(function(){this.pause(),U(this).remove()}),e.find("img object div").each(function(){U(this).remove()})},_clearFileInput:function(){var e,i,t,a=this.$element;this.fileInputCleared=!0,j.isEmpty(a.val())||(this.isIE9||this.isIE10?(e=a.closest("form"),i=U(document.createElement("form")),t=U(document.createElement("div")),a.before(t),(e.length?e:t).after(i),i.append(a).trigger("reset"),t.before(a).remove(),i.remove()):a.val(""))},_resetUpload:function(){var e=this;e.uploadCache={content:[],config:[],tags:[],append:!0},e.uploadCount=0,e.uploadStatus={},e.uploadLog=[],e.uploadAsyncCount=0,e.loadedImages=[],e.totalImagesCount=0,e.$btnUpload.removeAttr("disabled"),e._setProgress(0),j.addCss(e.$progress,"hide"),e._resetErrors(!1),e.ajaxAborted=!1,e.ajaxRequests=[],e._resetCanvas(),e.cacheInitialPreview={},e.overwriteInitial&&(e.initialPreview=[],e.initialPreviewConfig=[],e.initialPreviewThumbTags=[],e.previewCache.data={content:[],config:[],tags:[]})},_resetCanvas:function(){var e=this;e.canvas&&e.imageCanvasContext&&e.imageCanvasContext.clearRect(0,0,e.canvas.width,e.canvas.height)},_hasInitialPreview:function(){return!this.overwriteInitial&&this.previewCache.count()},_resetPreview:function(){var e,i=this;i.previewCache.count()?(e=i.previewCache.out(),i.$preview.html(e.content),i._setInitThumbAttr(),e=i.initialCaption||e.caption,i._setCaption(e)):(i._clearPreview(),i._initCaption()),i.showPreview&&(i._initZoom(),i._initSortable())},_clearDefaultPreview:function(){this.$preview.find(".file-default-preview").remove()},_validateDefaultPreview:function(){var e=this;e.showPreview&&!j.isEmpty(e.defaultPreviewContent)&&(e.$preview.html('<div class="file-default-preview">'+e.defaultPreviewContent+"</div>"),e.$container.removeClass("file-input-new"),e._initClickable())},_resetPreviewThumbs:function(e){var i=this;return e?(i._clearPreview(),void i.clearStack()):void(i._hasInitialPreview()?(e=i.previewCache.out(),i.$preview.html(e.content),i._setInitThumbAttr(),i._setCaption(e.caption),i._initPreviewActions()):i._clearPreview())},_getLayoutTemplate:function(e){e=this.layoutTemplates[e];return j.isEmpty(this.customLayoutTags)?e:j.replaceTags(e,this.customLayoutTags)},_getPreviewTemplate:function(e){e=this.previewTemplates[e];return j.isEmpty(this.customPreviewTags)?e:j.replaceTags(e,this.customPreviewTags)},_getOutData:function(e,i,t){var a=this;return e=e||{},i=i||{},t=t||a.filestack.slice(0)||{},{form:a.formdata,files:t,filenames:a.filenames,filescount:a.getFilesCount(),extra:a._getExtraData(),response:i,reader:a.reader,jqXHR:e}},_getMsgSelected:function(e){var i=1===e?this.fileSingle:this.filePlural;return 0<e?this.msgSelected.replace("{n}",e).replace("{files}",i):this.msgNoFilesSelected},_getThumbs:function(e){return this.$preview.find(j.FRAMES+":not(.file-preview-initial)"+(e=e||""))},_getExtraData:function(e,i){var t=this.uploadExtraData;return t="function"==typeof this.uploadExtraData?this.uploadExtraData(e,i):t},_initXhr:function(e,r,n){var o=this;return e.upload&&e.upload.addEventListener("progress",function(e){var i=0,t=e.total,a=e.loaded||e.position;e.lengthComputable&&(i=Math.floor(a/t*100)),r?o._setAsyncUploadStatus(r,i,n):o._setProgress(i)},!1),e},_ajaxSubmit:function(e,i,t,a,r,n){var o=this;o._raise("filepreajax",[r,n])&&(o._uploadExtra(r,n),n=U.extend(!0,{},{xhr:function(){var e=U.ajaxSettings.xhr();return o._initXhr(e,r,o.getFileStack().length)},url:o.uploadUrl,type:"POST",dataType:"json",data:o.formdata,cache:!1,processData:!1,contentType:!1,beforeSend:e,success:i,complete:t,error:a},o.ajaxSettings),o.ajaxRequests.push(U.ajax(n)))},_mergeArray:function(e,i){var t=j.cleanArray(this[e]),i=j.cleanArray(i);this[e]=t.concat(i)},_initUploadSuccess:function(e,i,t){var a,r,n,o,l=this;l.showPreview&&"object"==typeof e&&!U.isEmptyObject(e)&&void 0!==e.initialPreview&&0<e.initialPreview.length&&(l.hasInitData=!0,r=e.initialPreview||[],n=e.initialPreviewConfig||[],o=e.initialPreviewThumbTags||[],e=!(void 0!==e.append&&!e.append),0<r.length&&!j.isArray(r)&&(r=r.split(l.initialPreviewDelimiter)),l._mergeArray("initialPreview",r),l._mergeArray("initialPreviewConfig",n),l._mergeArray("initialPreviewThumbTags",o),void 0!==i?t?(t=i.attr("data-fileindex"),l.uploadCache.content[t]=r[0],l.uploadCache.config[t]=n[0]||[],l.uploadCache.tags[t]=o[0]||[],l.uploadCache.append=e):(t=l.previewCache.add(r,n[0],o[0],e),t=l.previewCache.get(t,!1),(t=(a=U(document.createElement("div")).html(t).hide().insertAfter(i)).find(".kv-zoom-cache"))&&t.length&&t.insertAfter(i),i.fadeOut("slow",function(){var e=a.find(".file-preview-frame");e&&e.length&&e.insertBefore(i).fadeIn("slow").css("display:inline-block"),l._initPreviewActions(),l._clearFileInput(),j.cleanZoomCache(l.$preview.find("#zoom-"+i.attr("id"))),i.remove(),a.remove(),l._initSortable()})):(l.previewCache.set(r,n,o,e),l._initPreview(),l._initPreviewActions()))},_initSuccessThumbs:function(){var r=this;r.showPreview&&r._getThumbs(j.FRAMES+".file-preview-success").each(function(){var t=U(this),a=r.$preview,e=t.find(".kv-file-remove");e.removeAttr("disabled"),r._handler(e,"click",function(){var e=t.attr("id"),i=r._raise("filesuccessremove",[e,t.data("fileindex")]);j.cleanMemory(t),!1!==i&&t.fadeOut("slow",function(){j.cleanZoomCache(a.find("#zoom-"+e)),t.remove(),a.find(j.FRAMES).length||r.reset()})})})},_checkAsyncComplete:function(){for(var e,i=this,t=0;t<i.filestack.length;t++)if(i.filestack[t]&&(e=i.previewInitId+"-"+t,-1===U.inArray(e,i.uploadLog)))return!1;return i.uploadAsyncCount===i.uploadLog.length},_uploadExtra:function(e,i){var t=this,e=t._getExtraData(e,i);0!==e.length&&U.each(e,function(e,i){t.formdata.append(e,i)})},_uploadSingle:function(n,f,o){var r,l,e,s,i,t,a,d,c=this,m=c.getFileStack().length,h=new FormData,p=c.previewInitId+"-"+n,g=0<c.filestack.length||!U.isEmptyObject(c.uploadExtraData),v=U("#"+p).find(".file-thumb-progress"),u={id:p,index:n};c.formdata=h,c.showPreview&&(l=U("#"+p+":not(.file-preview-initial)"),s=l.find(".kv-file-upload"),i=l.find(".kv-file-remove"),v.removeClass("hide")),0===m||!g||s&&s.hasClass("disabled")||c._abort(u)||(d=function(e,i){c.updateStack(e,void 0),c.uploadLog.push(i),c._checkAsyncComplete()&&(c.fileBatchCompleted=!0)},e=function(){var e,i,t,a=c.uploadCache,r=0,n=c.cacheInitialPreview;c.fileBatchCompleted&&(n&&n.content&&(r=n.content.length),setTimeout(function(){if(c.showPreview){if(c.previewCache.set(a.content,a.config,a.tags,a.append),r){for(i=0;i<a.content.length;i++)t=i+r,n.content[t]=a.content[i],n.config.length&&(n.config[t]=a.config[i]),n.tags.length&&(n.tags[t]=a.tags[i]);c.initialPreview=j.cleanArray(n.content),c.initialPreviewConfig=j.cleanArray(n.config),c.initialPreviewThumbTags=j.cleanArray(n.tags)}else c.initialPreview=a.content,c.initialPreviewConfig=a.config,c.initialPreviewThumbTags=a.tags;c.cacheInitialPreview={},c.hasInitData&&(c._initPreview(),c._initPreviewActions())}c.unlock(),c._clearFileInput(),e=c.$preview.find(".file-preview-initial"),c.uploadAsync&&e.length&&(j.addCss(e,j.SORT_CSS),c._initSortable()),c._raise("filebatchuploadcomplete",[c.filestack,c._getExtraData()]),c.uploadCount=0,c.uploadStatus={},c.uploadLog=[],c._setProgress(101)},100))},m=function(e){r=c._getOutData(e),c.fileBatchCompleted=!1,c.showPreview&&(l.hasClass("file-preview-success")||(c._setThumbStatus(l,"Loading"),j.addCss(l,"file-uploading")),s.attr("disabled",!0),i.attr("disabled",!0)),o||c.lock(),c._raise("filepreupload",[r,p,n]),U.extend(!0,u,r),c._abort(u)&&(e.abort(),c._setProgressCancelled())},g=function(e,i,t){var a=c.showPreview&&l.attr("id")?l.attr("id"):p;r=c._getOutData(t,e),U.extend(!0,u,r),setTimeout(function(){j.isEmpty(e)||j.isEmpty(e.error)?(c.showPreview&&(c._setThumbStatus(l,"Success"),s.hide(),c._initUploadSuccess(e,l,o),c._setProgress(101,v)),c._raise("fileuploaded",[r,a,n]),o?d(n,a):c.updateStack(n,void 0)):(c._showUploadError(e.error,u),c._setPreviewError(l,n),o&&d(n,a))},100)},t=function(){setTimeout(function(){c.showPreview&&(s.removeAttr("disabled"),i.removeAttr("disabled"),l.removeClass("file-uploading")),o?e():(c.unlock(!1),c._clearFileInput()),c._initSuccessThumbs()},100)},a=function(e,i,t){var a=c.ajaxOperations.uploadThumb,r=c._parseError(a,e,t,o?f[n].name:null);setTimeout(function(){o&&d(n,p),c.uploadStatus[p]=100,c._setPreviewError(l,n),U.extend(!0,u,c._getOutData(e)),c._setProgress(101,v,c.msgAjaxProgressError.replace("{operation}",a)),c._showUploadError(r,u)},100)},h.append(c.uploadFileAttr,f[n],c.filenames[n]),h.append("file_id",n),c._ajaxSubmit(m,g,t,a,p,n))},_uploadBatch:function(){var e,i,t,o,l=this,a=l.filestack,n=a.length,r=0<l.filestack.length||!U.isEmptyObject(l.uploadExtraData);l.formdata=new FormData,0!==n&&r&&!l._abort({})&&(o=function(){U.each(a,function(e){l.updateStack(e,void 0)}),l._clearFileInput()},r=function(e){l.lock();var i=l._getOutData(e);l.showPreview&&l._getThumbs().each(function(){var e=U(this),i=e.find(".kv-file-upload"),t=e.find(".kv-file-remove");e.hasClass("file-preview-success")||(l._setThumbStatus(e,"Loading"),j.addCss(e,"file-uploading")),i.attr("disabled",!0),t.attr("disabled",!0)}),l._raise("filebatchpreupload",[i]),l._abort(i)&&(e.abort(),l._setProgressCancelled())},e=function(e,i,t){var t=l._getOutData(t,e),a=l._getThumbs(":not(.file-preview-error)"),r=0,n=j.isEmpty(e)||j.isEmpty(e.errorkeys)?[]:e.errorkeys;j.isEmpty(e)||j.isEmpty(e.error)?(l._raise("filebatchuploadsuccess",[t]),o(),l.showPreview?(a.each(function(){var e=U(this),i=e.find(".kv-file-upload");e.find(".kv-file-upload").hide(),l._setThumbStatus(e,"Success"),e.removeClass("file-uploading"),i.removeAttr("disabled")}),l._initUploadSuccess(e)):l.reset(),l._setProgress(101)):(l.showPreview&&(a.each(function(){var e=U(this),i=e.find(".kv-file-remove"),t=e.find(".kv-file-upload");return e.removeClass("file-uploading"),t.removeAttr("disabled"),i.removeAttr("disabled"),0===n.length?void l._setPreviewError(e):(-1!==U.inArray(r,n)?l._setPreviewError(e):(e.find(".kv-file-upload").hide(),l._setThumbStatus(e,"Success"),l.updateStack(r,void 0)),void r++)}),l._initUploadSuccess(e)),l._showUploadError(e.error,t,"filebatchuploaderror"))},t=function(){l.unlock(),l._initSuccessThumbs(),l._clearFileInput(),l._raise("filebatchuploadcomplete",[l.filestack,l._getExtraData()])},i=function(e,i,t){var a=l._getOutData(e),r=l.ajaxOperations.uploadBatch,e=l._parseError(r,e,t);l._showUploadError(e,a,"filebatchuploaderror"),l.uploadFileCount=n-1,l.showPreview&&(l._getThumbs().each(function(){var e=U(this),i=e.attr("data-fileindex");e.removeClass("file-uploading"),void 0!==l.filestack[i]&&l._setPreviewError(e)}),l._getThumbs().removeClass("file-uploading"),l._getThumbs(" .kv-file-upload").removeAttr("disabled"),l._getThumbs(" .kv-file-delete").removeAttr("disabled"),l._setProgress(101,l.$progress,l.msgAjaxProgressError.replace("{operation}",r)))},U.each(a,function(e,i){j.isEmpty(a[e])||l.formdata.append(l.uploadFileAttr,i,l.filenames[e])}),l._ajaxSubmit(r,e,t,i))},_uploadExtraOnly:function(){var n=this,o={};n.formdata=new FormData,n._abort(o)||n._ajaxSubmit(function(e){n.lock();var i=n._getOutData(e);n._raise("filebatchpreupload",[i]),n._setProgress(50),o.data=i,o.xhr=e,n._abort(o)&&(e.abort(),n._setProgressCancelled())},function(e,i,t){t=n._getOutData(t,e);j.isEmpty(e)||j.isEmpty(e.error)?(n._raise("filebatchuploadsuccess",[t]),n._clearFileInput(),n._initUploadSuccess(e),n._setProgress(101)):n._showUploadError(e.error,t,"filebatchuploaderror")},function(){n.unlock(),n._clearFileInput(),n._raise("filebatchuploadcomplete",[n.filestack,n._getExtraData()])},function(e,i,t){var a=n._getOutData(e),r=n.ajaxOperations.uploadExtra,e=n._parseError(r,e,t);o.data=a,n._showUploadError(e,a,"filebatchuploaderror"),n._setProgress(101,n.$progress,n.msgAjaxProgressError.replace("{operation}",r))})},_deleteFileIndex:function(e){var i=this,t=e.attr("data-fileindex");"init_"===t.substring(0,5)&&(t=parseInt(t.replace("init_","")),i.initialPreview=j.spliceArray(i.initialPreview,t),i.initialPreviewConfig=j.spliceArray(i.initialPreviewConfig,t),i.initialPreviewThumbTags=j.spliceArray(i.initialPreviewThumbTags,t),i.$preview.find(j.FRAMES).each(function(){var e=U(this),i=e.attr("data-fileindex");"init_"===i.substring(0,5)&&(i=parseInt(i.replace("init_","")),t<i&&e.attr("data-fileindex","init_"+--i))}),i.uploadAsync&&(i.cacheInitialPreview=i.getPreview()))},_initFileActions:function(){var d=this,c=d.$preview;d.showPreview&&(d._initZoomButton(),c.find(j.FRAMES+" .kv-file-remove").each(function(){var r,n,e=U(this),o=e.closest(j.FRAMES),l=o.attr("id"),s=o.attr("data-fileindex");d._handler(e,"click",function(){return!(!1===d._raise("filepreremove",[l,s])||!d._validateMinCount())&&(r=o.hasClass("file-preview-error"),j.cleanMemory(o),void o.fadeOut("slow",function(){j.cleanZoomCache(c.find("#zoom-"+l)),d.updateStack(s,void 0),d._clearObjects(o),o.remove(),l&&r&&d.$errorContainer.find('li[data-file-id="'+l+'"]').fadeOut("fast",function(){U(this).remove(),d._errorsExist()||d._resetErrors()}),d._clearFileInput();var e=d.getFileStack(!0),i=d.previewCache.count(),t=e.length,a=d.showPreview&&c.find(j.FRAMES).length;0!==t||0!==i||a?(n=1<(n=i+t)?d._getMsgSelected(n):e[0]?d._getFileNames()[0]:"",d._setCaption(n)):d.reset(),d._raise("fileremoved",[l,s])}))})}),d.$preview.find(j.FRAMES+" .kv-file-upload").each(function(){var t=U(this);d._handler(t,"click",function(){var e=t.closest(j.FRAMES),i=e.attr("data-fileindex");e.hasClass("file-preview-error")||d._uploadSingle(i,d.filestack,!1)})}))},_initPreviewActions:function(){function p(){var e=u.isUploadable?u.previewCache.count():u.$element.get(0).files.length;0!==f.find(i).length||e||(u.reset(),u.initialCaption="")}var u=this,f=u.$preview,a=u.deleteExtraData||{},i=j.FRAMES+" .kv-file-remove";u._initZoomButton(),f.find(i).each(function(){var e,n,o,l,i,s,d=U(this),t=d.data("url")||u.deleteUrl,c=d.data("key");j.isEmpty(t)||void 0===c||(o=d.closest(j.FRAMES),i=u.previewCache.data,l=o.data("fileindex"),l=parseInt(l.replace("init_","")),i=j.isEmpty(i.config)&&j.isEmpty(i.config[l])?null:i.config[l],"function"==typeof(s=j.isEmpty(i)||j.isEmpty(i.extra)?a:i.extra)&&(s=s()),n={id:d.attr("id"),key:c,extra:s},e=U.extend(!0,{},{url:t,type:"POST",dataType:"json",data:U.extend(!0,{},{key:c},s),beforeSend:function(e){u.ajaxAborted=!1,u._raise("filepredelete",[c,e,s]),u.ajaxAborted?e.abort():(j.addCss(o,"file-uploading"),j.addCss(d,"disabled"))},success:function(e,i,t){var a,r;return j.isEmpty(e)||j.isEmpty(e.error)?(u.previewCache.init(),l=parseInt(o.data("fileindex").replace("init_","")),u.previewCache.unset(l),r=0<(a=u.previewCache.count())?u._getMsgSelected(a):"",u._deleteFileIndex(o),u._setCaption(r),u._raise("filedeleted",[c,t,s]),o.removeClass("file-uploading").addClass("file-deleted"),void o.fadeOut("slow",function(){j.cleanZoomCache(f.find("#zoom-"+o.attr("id"))),u._clearObjects(o),o.remove(),p(),a||0!==u.getFileStack().length||(u._setCaption(""),u.reset())})):(n.jqXHR=t,n.response=e,u._showError(e.error,n,"filedeleteerror"),o.removeClass("file-uploading"),d.removeClass("disabled"),void p())},error:function(e,i,t){var a=u.ajaxOperations.deleteThumb,a=u._parseError(a,e,t);n.jqXHR=e,n.response={},u._showError(a,n,"filedeleteerror"),o.removeClass("file-uploading"),p()}},u.ajaxDeleteSettings),u._handler(d,"click",function(){return!!u._validateMinCount()&&void U.ajax(e)}))})},_hideFileIcon:function(){this.overwriteInitial&&this.$captionContainer.find(".kv-caption-icon").hide()},_showFileIcon:function(){this.$captionContainer.find(".kv-caption-icon").show()},_getSize:function(e){var i=parseFloat(e),t=this.fileSizeGetter;return U.isNumeric(e)&&U.isNumeric(i)?(i="function"==typeof t?t(i):0===i?"0.00 B":(e=Math.floor(Math.log(i)/Math.log(1024)),t=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],+(i/Math.pow(1024,e)).toFixed(2)+" "+t[e]),this._getLayoutTemplate("size").replace("{sizeText}",i)):""},_generatePreviewTemplate:function(o,e,l,s,d,a,r,f,n,c,m){function h(e,i,t,a){var r=t?"zoom-"+d:d,n=p._getPreviewTemplate(e),a=(f||"")+" "+a;return p.frameClass&&(a=p.frameClass+" "+a),t&&(a=a.replace(" "+j.SORT_CSS,"")),n=p._parseFilePreviewIcon(n,l),"text"===e&&(i=j.htmlEncode(i)),"object"!==o||s||U.each(p.defaults.fileTypeSettings,function(e,i){"object"!==e&&"other"!==e&&i(l,s)&&(_="type-"+e)}),n.replace(/\{previewId}/g,r).replace(/\{caption}/g,g).replace(/\{frameClass}/g,a).replace(/\{type}/g,s).replace(/\{fileindex}/g,c).replace(/\{width}/g,u).replace(/\{height}/g,v).replace(/\{typeCss}/g,_).replace(/\{footer}/g,w).replace(/\{data}/g,i).replace(/\{template}/g,m||o)}var p=this,g=p.slug(l),i="",t=p.previewSettings[o]||p.defaults.previewSettings[o],u=t&&t.width?t.width:"",v=t&&t.height?t.height:"",w=n||p._renderFileFooter(g,r,j.isEmpty(u)?"auto":u,a),t=p._getPreviewIcon(l),_="type-default",n=t&&p.preferIconicPreview,r=t&&p.preferIconicZoomPreview;return c=c||d.slice(d.lastIndexOf("-")+1),p.fileActionSettings.showZoom&&(i=h(r?"other":o,e,!0,"kv-zoom-thumb")),i="\n"+p._getLayoutTemplate("zoomCache").replace("{zoomContent}",i),h(n?"other":o,e,!1,"kv-preview-thumb")+i},_previewDefault:function(e,i,t){var a,r,n,o,l,s=this,d=s.$preview;s.showPreview&&(a=e?e.name:"",r=e?e.type:"",n=e.size||0,o=s.slug(a),l=!0===t&&!s.isUploadable,e=j.objUrl.createObjectURL(e),s._clearDefaultPreview(),e=s._generatePreviewTemplate("other",e,a,r,i,l,n),d.append("\n"+e),s._setThumbAttr(i,o,n),!0===t&&s.isUploadable&&s._setThumbStatus(U("#"+i),"Error"))},_previewFile:function(c,e,i,t,a){var r,n,o,l,s,p,d,u;this.showPreview&&(n=(r=this)._parseFileType(e),o=e?e.name:"",l=r.slug(o),d=r.allowedPreviewTypes,s=r.allowedPreviewMimeTypes,p=r.$preview,d=d&&0<=d.indexOf(n),u=e.size||0,i="text"===n||"html"===n||"image"===n?i.target.result:a,a=s&&-1!==s.indexOf(e.type),"html"===n&&r.purifyHtml&&window.DOMPurify&&(i=window.DOMPurify.sanitize(i)),d||a?(s=r._generatePreviewTemplate(n,i,o,e.type,t,!1,u),r._clearDefaultPreview(),p.append("\n"+s),r._validateImage(t,l,e.type,e.size)):r._previewDefault(e,t),r._setThumbAttr(t,l,u),r._initSortable())},_setThumbAttr:function(e,i,t){e=U("#"+e);e.length&&(t=t&&0<t?this._getSize(t):"",e.data({caption:i,size:t}))},_setInitThumbAttr:function(){var e,i,t,a=this.previewCache.data,r=this.previewCache.count(!0);if(0!==r)for(var n=0;n<r;n++)i=a.config[n],t=this.previewInitId+"-init_"+n,e=j.ifSet("caption",i,j.ifSet("filename",i)),i=j.ifSet("size",i),this._setThumbAttr(t,e,i)},_slugDefault:function(e){return j.isEmpty(e)?"":String(e).replace(/[\-\[\]\/\{}:;#%=\(\)\*\+\?\\\^\$\|<>&"']/g,"_")},_readFiles:function(m){this.reader=new FileReader;var h,g=this,x=g.$element,T=g.$preview,v=g.reader,w=g.$previewContainer,_=g.$previewStatus,S=g.msgLoading,F=g.msgProgress,I=g.previewInitId,b=m.length,P=g.fileTypeSettings,k=g.filestack.length,C=g.allowedFileTypes,z=C?C.length:0,y=g.allowedFileExtensions,A=j.isEmpty(y)?"":y.join(", "),$=g.maxFilePreviewSize&&parseFloat(g.maxFilePreviewSize),D=T.length&&(!$||isNaN($)),E=function(e,i,t,a){var r=U.extend(!0,{},g._getOutData({},{},m),{id:t,index:a}),n={id:t,index:a,file:i,files:m};return g._previewDefault(i,t,!0),g.isUploadable&&(g.addToStack(void 0),setTimeout(function(){h(a+1)},100)),g._initFileActions(),g.removeFromPreviewOnError&&U("#"+t).remove(),g.isUploadable?g._showUploadError(e,r):g._showError(e,n)};g.loadedImages=[],g.totalImagesCount=0,U.each(m,function(e,i){var t=g.fileTypeSettings.image;t&&t(i.type)&&g.totalImagesCount++}),(h=function(i){if((b=j.isEmpty(x.attr("multiple"))?1:b)<=i)return g.isUploadable&&0<g.filestack.length?g._raise("filebatchselected",[g.getFileStack()]):g._raise("filebatchselected",[m]),w.removeClass("file-thumb-loading"),void _.html("");var e,t,a,r,n,o=I+"-"+(k+i),l=m[i],s=l.name?g.slug(l.name):"",c=(l.size||0)/1e3,d="",p=j.objUrl.createObjectURL(l),u=0,f="";if(0<z)for(e=0;e<z;e++)r=C[e],r=g.msgFileTypes[r]||r,f+=0===e?r:", "+r;if(!1!==s){if(0===s.length)return t=g.msgInvalidFileName.replace("{name}",j.htmlEncode(l.name)),void(g.isError=E(t,l,o,i));if(j.isEmpty(y)||(d=new RegExp("\\.("+y.join("|")+")$","i")),a=c.toFixed(2),0<g.maxFileSize&&c>g.maxFileSize)return t=g.msgSizeTooLarge.replace("{name}",s).replace("{size}",a).replace("{maxSize}",g.maxFileSize),void(g.isError=E(t,l,o,i));if(null!==g.minFileSize&&c<=j.getNum(g.minFileSize))return t=g.msgSizeTooSmall.replace("{name}",s).replace("{size}",a).replace("{minSize}",g.minFileSize),void(g.isError=E(t,l,o,i));if(!j.isEmpty(C)&&j.isArray(C)){for(e=0;e<C.length;e+=1)n=C[e],u+=(n=P[n])&&"function"==typeof n&&n(l.type,l.name)?1:0;if(0===u)return t=g.msgInvalidFileType.replace("{name}",s).replace("{types}",f),void(g.isError=E(t,l,o,i))}return 0!==u||j.isEmpty(y)||!j.isArray(y)||j.isEmpty(d)||(a=j.compare(s,d),0!==(u+=j.isEmpty(a)?0:a.length))?g.showPreview?!D&&$<c?(g.addToStack(l),w.addClass("file-thumb-loading"),g._previewDefault(l,o),g._initFileActions(),g._updateFileDetails(b),void h(i+1)):(T.length&&void 0!==FileReader?(_.html(S.replace("{index}",i+1).replace("{files}",b)),w.addClass("file-thumb-loading"),v.onerror=function(e){g._errorHandler(e,s)},v.onload=function(e){g._previewFile(i,l,e,o,p),g._initFileActions()},v.onloadend=function(){t=F.replace("{index}",i+1).replace("{files}",b).replace("{percent}",50).replace("{name}",s),setTimeout(function(){_.html(t),g._updateFileDetails(b),h(i+1)},100),g._raise("fileloaded",[l,o,i,v])},v.onprogress=function(e){e.lengthComputable&&(e=e.loaded/e.total*100,e=Math.ceil(e),t=F.replace("{index}",i+1).replace("{files}",b).replace("{percent}",e).replace("{name}",s),setTimeout(function(){_.html(t)},100))},d=P.text,a=P.image,d(l.type,s)?v.readAsText(l,g.textEncoding):a(l.type,s)?v.readAsDataURL(l):v.readAsArrayBuffer(l)):(g._previewDefault(l,o),setTimeout(function(){h(i+1),g._updateFileDetails(b)},100),g._raise("fileloaded",[l,o,i,v])),void g.addToStack(l)):(g.addToStack(l),setTimeout(function(){h(i+1)},100),void g._raise("fileloaded",[l,o,i,v])):(t=g.msgInvalidFileExtension.replace("{name}",s).replace("{extensions}",A),void(g.isError=E(t,l,o,i)))}h(i+1)})(0),g._updateFileDetails(b,!1)},_updateFileDetails:function(e){var i=this,t=i.$element,a=i.getFileStack(),t=j.isIE(9)&&j.findFileName(t.val())||t[0].files[0]&&t[0].files[0].name||a.length&&a[0].name||"",t=i.slug(t),a=i.isUploadable?a.length:e,r=i.previewCache.count()+a,a=1<a?i._getMsgSelected(r):t;i.isError?(i.$previewContainer.removeClass("file-thumb-loading"),i.$previewStatus.html(""),i.$captionContainer.find(".kv-caption-icon").hide()):i._showFileIcon(),i._setCaption(a,i.isError),i.$container.removeClass("file-input-new file-input-ajax-new"),1===arguments.length&&i._raise("fileselect",[e,t]),i.previewCache.count()&&i._initPreviewActions()},_setThumbStatus:function(e,i){var t,a,r,n,o;this.showPreview&&(a=(t="indicator"+i)+"Title",r="file-preview-"+i.toLowerCase(),n=e.find(".file-upload-indicator"),o=this.fileActionSettings,e.removeClass("file-preview-success file-preview-error file-preview-loading"),"Error"===i&&e.find(".kv-file-upload").attr("disabled",!0),"Success"===i&&(e.find(".file-drag-handle").remove(),n.css("margin-left",0)),n.html(o[t]),n.attr("title",o[a]),e.addClass(r))},_setProgressCancelled:function(){this._setProgress(101,this.$progress,this.msgCancelled)},_setProgress:function(e,i,t){var a=this,r=Math.min(e,100),n=a.progressUploadThreshold,o=e<=100?a.progressTemplate:a.progressCompleteTemplate,o=r<100?a.progressTemplate:t?a.progressErrorTemplate:o;i=i||a.$progress,j.isEmpty(o)||(e=n&&n<r&&e<=100?o.replace(/\{percent}/g,n).replace(/\{status}/g,a.msgUploadThreshold):(n=100<e?a.msgUploadEnd:r+"%",o.replace(/\{percent}/g,r).replace(/\{status}/g,n)),i.html(e),t&&i.find('[role="progressbar"]').html(t))},_setFileDropZoneTitle:function(){var e,i=this,t=i.$container.find(".file-drop-zone"),a=i.dropZoneTitle;i.isClickable&&(e=j.isEmpty(i.$element.attr("multiple"))?i.fileSingle:i.filePlural,a+=i.dropZoneClickTitle.replace("{files}",e)),t.find("."+i.dropZoneTitleClass).remove(),i.isUploadable&&i.showPreview&&0!==t.length&&!(0<i.getFileStack().length)&&i.dropZoneEnabled&&(0===t.find(j.FRAMES).length&&j.isEmpty(i.defaultPreviewContent)&&t.prepend('<div class="'+i.dropZoneTitleClass+'">'+a+"</div>"),i.$container.removeClass("file-input-new"),j.addCss(i.$container,"file-input-ajax-new"))},_setAsyncUploadStatus:function(e,i,t){var a=0;this._setProgress(i,U("#"+e).find(".file-thumb-progress")),this.uploadStatus[e]=i,U.each(this.uploadStatus,function(e,i){a+=i}),this._setProgress(Math.floor(a/t))},_validateMinCount:function(){var e=this,i=(e.isUploadable?e.getFileStack():e.$element.get(0).files).length;return!(e.validateInitialCount&&0<e.minFileCount&&e._getFileCount(i-1)<e.minFileCount)||(e._noFilesError({}),!1)},_getFileCount:function(e){return this.validateInitialCount&&!this.overwriteInitial&&(e+=this.previewCache.count()),e},_getFileId:function(e){var i=this.generateFileId;return"function"==typeof i?i(e,event):e?(i=e.webkitRelativePath||e.fileName||e.name||null)?e.size+"-"+i.replace(/[^0-9a-zA-Z_-]/gim,""):null:null},_getFileName:function(e){return e&&e.name?this.slug(e.name):void 0},_getFileIds:function(i){return this.fileids.filter(function(e){return i?void 0!==e:null!=e})},_getFileNames:function(i){return this.filenames.filter(function(e){return i?void 0!==e:null!=e})},_setPreviewError:function(e,i,t){void 0!==i&&this.updateStack(i,t),this.removeFromPreviewOnError?e.remove():this._setThumbStatus(e,"Error")},_checkDimensions:function(e,i,t,a,r,n,o){var l=this[("Small"===i?"min":"max")+"Image"+n];!j.isEmpty(l)&&t.length&&(t=t[0],t="Width"===n?t.naturalWidth||t.width:t.naturalHeight||t.height,("Small"===i?l<=t:t<=l)||(t=this["msgImage"+n+i].replace("{name}",r).replace("{size}",l),this._showUploadError(t,o),this._setPreviewError(a,e,null)))},_validateImage:function(e,i,t,a){var r,n=this,o=n.$preview,l=o.find("#"+e),s=l.attr("data-fileindex"),d=l.find("img");i=i||"Untitled",d.length&&n._handler(d,"load",function(){r=l.width(),o.width()<r&&(d.css("width","100%"),l.css("width","97%")),r={ind:s,id:e},n._checkDimensions(s,"Small",d,l,i,"Width",r),n._checkDimensions(s,"Small",d,l,i,"Height",r),n.resizeImage||(n._checkDimensions(s,"Large",d,l,i,"Width",r),n._checkDimensions(s,"Large",d,l,i,"Height",r)),n._raise("fileimageloaded",[e]),n.loadedImages.push({ind:s,img:d,thumb:l,pid:e,typ:t,siz:a,validated:!1}),n._validateAllImages()})},_validateAllImages:function(){var e,i,t,a=this,r={val:0},n=a.loadedImages.length,o=a.resizeIfSizeMoreThan;if(n===a.totalImagesCount&&(a._raise("fileimagesloaded"),a.resizeImage))for(e=0;e<a.loadedImages.length;e++)(i=a.loadedImages[e]).validated||((t=i.siz)&&1e3*o<t&&a._getResizedImage(i,r,n),a.loadedImages[e].validated=!0)},_getResizedImage:function(e,i,c){var a=this,p=U(e.img)[0],t=p.naturalWidth,r=p.naturalHeight,n=a.maxImageWidth||t,o=a.maxImageHeight||r,l=!(!t||!r),u=a.imageCanvas,f=a.imageCanvasContext,m=e.typ,s=e.pid,d=e.ind,h=e.thumb,g=function(e,i,t){a.isUploadable?a._showUploadError(e,i,t):a._showError(e,i,t),a._setPreviewError(h,d)};if(a.filestack[d]&&l&&!(t<=n&&r<=o)||(l&&a.filestack[d]&&a._raise("fileimageresized",[s,d]),i.val++,i.val===c&&a._raise("fileimagesresized"),l)){m=m||a.resizeDefaultImageType,e=n<t,l=o<r,l="width"===a.resizePreference?e?n/t:l?o/r:1:l?o/r:e?n/t:1,a._resetCanvas(),r*=l,u.width=t*=l,u.height=r;try{f.drawImage(p,0,0,t,r),u.toBlob(function(e){a.filestack[d]=e,a._raise("fileimageresized",[s,d]),i.val++,i.val===c&&a._raise("fileimagesresized",[void 0,void 0]),e instanceof Blob||g(a.msgImageResizeError,{id:s,index:d},"fileimageresizeerror")},m,a.resizeQuality)}catch(e){i.val++,i.val===c&&a._raise("fileimagesresized",[void 0,void 0]),o=a.msgImageResizeException.replace("{errors}",e.message),g(o,{id:s,index:d},"fileimageresizeexception")}}else g(a.msgImageResizeError,{id:s,index:d},"fileimageresizeerror")},_initBrowse:function(e){var i=this;i.showBrowse?(i.$btnFile=e.find(".btn-file"),i.$btnFile.append(i.$element)):i.$element.hide()},_initCaption:function(){var e=this.initialCaption||"";return this.overwriteInitial||j.isEmpty(e)?(this.$caption.html(""),!1):(this._setCaption(e),!0)},_setCaption:function(e,i){var t,a,r=this,n=r.getFileStack();if(r.$caption.length){if(i)t=U("<div>"+r.msgValidationError+"</div>").text(),n=(i=n.length)?1===i&&n[0]?r._getFileNames()[0]:r._getMsgSelected(i):r._getMsgSelected(r.msgNo),a='<span class="'+r.msgValidationErrorClass+'">'+r.msgValidationErrorIcon+(j.isEmpty(e)?n:e)+"</span>";else{if(j.isEmpty(e))return;t=U("<div>"+e+"</div>").text(),a=r._getLayoutTemplate("fileIcon")+t}r.$caption.html(a),r.$caption.attr("title",t),r.$captionContainer.find(".file-caption-ellipsis").attr("title",t)}},_createContainer:function(){var e=this,i=U(document.createElement("div")).attr({class:"file-input file-input-new"}).html(e._renderMain());return e.$element.before(i),e._initBrowse(i),e.theme&&i.addClass("theme-"+e.theme),i},_refreshContainer:function(){var e=this.$container;e.before(this.$element),e.html(this._renderMain()),this._initBrowse(e)},_renderMain:function(){var e=this,i=e.isUploadable&&e.dropZoneEnabled?" file-drop-zone":"file-drop-disabled",t=e.showClose?e._getLayoutTemplate("close"):"",i=e.showPreview?e._getLayoutTemplate("preview").replace(/\{class}/g,e.previewClass).replace(/\{dropClass}/g,i):"",a=e.isDisabled?e.captionClass+" file-caption-disabled":e.captionClass,a=e.captionTemplate.replace(/\{class}/g,a+" kv-fileinput-caption");return e.mainTemplate.replace(/\{class}/g,e.mainClass+(!e.showBrowse&&e.showCaption?" no-browse":"")).replace(/\{preview}/g,i).replace(/\{close}/g,t).replace(/\{caption}/g,a).replace(/\{upload}/g,e._renderButton("upload")).replace(/\{remove}/g,e._renderButton("remove")).replace(/\{cancel}/g,e._renderButton("cancel")).replace(/\{browse}/g,e._renderButton("browse"))},_renderButton:function(e){var i=this,t=i._getLayoutTemplate("btnDefault"),a=i[e+"Class"],r=i[e+"Title"],n=i[e+"Icon"],o=i[e+"Label"],l=i.isDisabled?" disabled":"",s="button";switch(e){case"remove":if(!i.showRemove)return"";break;case"cancel":if(!i.showCancel)return"";a+=" hide";break;case"upload":if(!i.showUpload)return"";i.isUploadable&&!i.isDisabled?t=i._getLayoutTemplate("btnLink").replace("{href}",i.uploadUrl):s="submit";break;case"browse":if(!i.showBrowse)return"";t=i._getLayoutTemplate("btnBrowse");break;default:return""}return a+="browse"===e?" btn-file":" fileinput-"+e+" fileinput-"+e+"-button",j.isEmpty(o)||(o=' <span class="'+i.buttonLabelClass+'">'+o+"</span>"),t.replace("{type}",s).replace("{css}",a).replace("{title}",r).replace("{status}",l).replace("{icon}",n).replace("{label}",o)},_renderThumbProgress:function(){return'<div class="file-thumb-progress hide">'+this.progressTemplate.replace(/\{percent}/g,"0").replace(/\{status}/g,this.msgUploadBegin)+"</div>"},_renderFileFooter:function(e,i,t,a){var r=this,n=r.fileActionSettings,o=n.showRemove,l=n.showDrag,c=n.showUpload,s=n.showZoom,d=r._getLayoutTemplate("footer"),p=a?n.indicatorError:n.indicatorNew,a=a?n.indicatorErrorTitle:n.indicatorNewTitle;return i=r._getSize(i),n=(r.isUploadable?d.replace(/\{actions}/g,r._renderFileActions(c,o,s,l,!1,!1,!1)).replace(/\{caption}/g,e).replace(/\{size}/g,i).replace(/\{width}/g,t).replace(/\{progress}/g,r._renderThumbProgress()):d.replace(/\{actions}/g,r._renderFileActions(!1,!1,s,l,!1,!1,!1)).replace(/\{caption}/g,e).replace(/\{size}/g,i).replace(/\{width}/g,t).replace(/\{progress}/g,"")).replace(/\{indicator}/g,p).replace(/\{indicatorTitle}/g,a),j.replaceTags(n,r.previewThumbTags)},_renderFileActions:function(e,i,t,a,r,n,o,c){if(!(e||i||t||a))return"";var l=this,n=!1===n?"":' data-url="'+n+'"',o=!1===o?"":' data-key="'+o+'"',s="",p="",u="",f="",m=l._getLayoutTemplate("actions"),d=l.fileActionSettings,h=l.otherActionButtons.replace(/\{dataKey}/g,o),r=r?d.removeClass+" disabled":d.removeClass;return i&&(s=l._getLayoutTemplate("actionDelete").replace(/\{removeClass}/g,r).replace(/\{removeIcon}/g,d.removeIcon).replace(/\{removeTitle}/g,d.removeTitle).replace(/\{dataUrl}/g,n).replace(/\{dataKey}/g,o)),e&&(p=l._getLayoutTemplate("actionUpload").replace(/\{uploadClass}/g,d.uploadClass).replace(/\{uploadIcon}/g,d.uploadIcon).replace(/\{uploadTitle}/g,d.uploadTitle)),t&&(u=l._getLayoutTemplate("actionZoom").replace(/\{zoomClass}/g,d.zoomClass).replace(/\{zoomIcon}/g,d.zoomIcon).replace(/\{zoomTitle}/g,d.zoomTitle)),a&&c&&(i="drag-handle-init "+d.dragClass,f=l._getLayoutTemplate("actionDrag").replace(/\{dragClass}/g,i).replace(/\{dragTitle}/g,d.dragTitle).replace(/\{dragIcon}/g,d.dragIcon)),m.replace(/\{delete}/g,s).replace(/\{upload}/g,p).replace(/\{zoom}/g,u).replace(/\{drag}/g,f).replace(/\{other}/g,h)},_browse:function(e){var i=this;i._raise("filebrowse"),e&&e.isDefaultPrevented()||(i.isError&&!i.isUploadable&&i.clear(),i.$captionContainer.focus())},_filterDuplicate:function(e,i,t){var a=this._getFileId(e);a&&t&&-1<t.indexOf(a)||(t=t||[],i.push(e),t.push(a))},_change:function(e){var t=this,i=t.$element;if(!t.isUploadable&&j.isEmpty(i.val())&&t.fileInputCleared)t.fileInputCleared=!1;else{t.fileInputCleared=!1;var c,a,r,p,n=[],o=1<arguments.length,l=t.isUploadable,s=(o?e.originalEvent.dataTransfer:i.get(0)).files,u=t.filestack.length,i=j.isEmpty(i.attr("multiple"))&&0<u,d=0,f=t._getFileIds();if(t.reader=null,t._resetUpload(),t._hideFileIcon(),t.isUploadable&&t.$container.find(".file-drop-zone ."+t.dropZoneTitleClass).remove(),o?U.each(s,function(e,i){i&&!i.type&&void 0!==i.size&&i.size%4096==0?d++:t._filterDuplicate(i,n,f)}):(s=e.target&&void 0===e.target.files?e.target.value?[{name:e.target.value.replace(/^.+\\/,"")}]:[]:e.target.files||{},U.each(s,function(e,i){t._filterDuplicate(i,n,f)})),j.isEmpty(n)||0===n.length)return l||t.clear(),t._showFolderError(d),void t._raise("fileselectnone");if(t._resetErrors(),o=n.length,e=t._getFileCount(t.isUploadable?t.getFileStack().length+o:o),0<t.maxFileCount&&e>t.maxFileCount){if(!t.autoReplace||o>t.maxFileCount)return o=t.autoReplace&&o>t.maxFileCount?o:e,o=t.msgFilesTooMany.replace("{m}",t.maxFileCount).replace("{n}",o),t.isError=(o=o,r=a=c=null,p=U.extend(!0,{},t._getOutData({},{},s),{id:a,index:r}),a={id:a,index:r,file:c,files:s},t.isUploadable?t._showUploadError(o,p):t._showError(o,a)),t.$captionContainer.find(".kv-caption-icon").hide(),t._setCaption("",!0),void t.$container.removeClass("file-input-new file-input-ajax-new");e>t.maxFileCount&&t._resetPreviewThumbs(l)}else!l||i?(t._resetPreviewThumbs(!1),i&&t.clearStack()):!l||0!==u||t.previewCache.count()&&!t.overwriteInitial||t._resetPreviewThumbs(!0);t.isPreviewable?t._readFiles(n):t._updateFileDetails(1),t._showFolderError(d)}},_abort:function(e){var i=this;return!(!i.ajaxAborted||"object"!=typeof i.ajaxAborted||void 0===i.ajaxAborted.message)&&((e=U.extend(!0,{},i._getOutData(),e)).abortData=i.ajaxAborted.data||{},e.abortMessage=i.ajaxAborted.message,i._setProgress(101,i.$progress,i.msgCancelled),i._showUploadError(i.ajaxAborted.message,e,"filecustomerror"),i.cancel(),!0)},_resetFileStack:function(){var r=this,n=0,o=[],l=[],s=[];r._getThumbs().each(function(){var e=U(this),i=e.attr("data-fileindex"),t=r.filestack[i],a=e.attr("id");"-1"!==i&&-1!==i&&(void 0!==t?(o[n]=t,l[n]=r._getFileName(t),s[n]=r._getFileId(t),e.attr({id:r.previewInitId+"-"+n,"data-fileindex":n}),n++):(i="uploaded-"+j.uniqId(),e.attr({id:i,"data-fileindex":"-1"}),r.$preview.find("#zoom-"+a).attr("id","zoom-"+i)))}),r.filestack=o,r.filenames=l,r.fileids=s},clearStack:function(){return this.filestack=[],this.filenames=[],this.fileids=[],this.$element},updateStack:function(e,i){var t=this;return t.filestack[e]=i,t.filenames[e]=t._getFileName(i),t.fileids[e]=i&&t._getFileId(i)||null,t.$element},addToStack:function(e){var i=this;return i.filestack.push(e),i.filenames.push(i._getFileName(e)),i.fileids.push(i._getFileId(e)),i.$element},getFileStack:function(i){return this.filestack.filter(function(e){return i?void 0!==e:null!=e})},getFilesCount:function(){var e=(this.isUploadable?this.getFileStack():this.$element.get(0).files).length;return this._getFileCount(e)},lock:function(){var e=this;return e._resetErrors(),e.disable(),e.showRemove&&j.addCss(e.$container.find(".fileinput-remove"),"hide"),e.showCancel&&e.$container.find(".fileinput-cancel").removeClass("hide"),e._raise("filelock",[e.filestack,e._getExtraData()]),e.$element},unlock:function(e){var i=this;return void 0===e&&(e=!0),i.enable(),i.showCancel&&j.addCss(i.$container.find(".fileinput-cancel"),"hide"),i.showRemove&&i.$container.find(".fileinput-remove").removeClass("hide"),e&&i._resetFileStack(),i._raise("fileunlock",[i.filestack,i._getExtraData()]),i.$element},cancel:function(){var e,t=this,i=t.ajaxRequests,a=i.length;if(0<a)for(e=0;e<a;e+=1)t.cancelling=!0,i[e].abort();return t._setProgressCancelled(),t._getThumbs().each(function(){var e=U(this),i=e.attr("data-fileindex");e.removeClass("file-uploading"),void 0!==t.filestack[i]&&(e.find(".kv-file-upload").removeClass("disabled").removeAttr("disabled"),e.find(".kv-file-remove").removeClass("disabled").removeAttr("disabled")),t.unlock()}),t.$element},clear:function(){var e,i=this;if(i._raise("fileclear"))return i.$btnUpload.removeAttr("disabled"),i._getThumbs().find("video,audio,img").each(function(){j.cleanMemory(U(this))}),i._resetUpload(),i.clearStack(),i._clearFileInput(),i._resetErrors(!0),i._hasInitialPreview()?(i._showFileIcon(),i._resetPreview(),i._initPreviewActions(),i.$container.removeClass("file-input-new")):(i._getThumbs().each(function(){i._clearObjects(U(this))}),i.isUploadable&&(i.previewCache.data={}),i.$preview.html(""),e=!i.overwriteInitial&&0<i.initialCaption.length?i.initialCaption:"",i.$caption.html(e),i.$caption.attr("title",""),j.addCss(i.$container,"file-input-new"),i._validateDefaultPreview()),0===i.$container.find(j.FRAMES).length&&(i._initCaption()||i.$captionContainer.find(".kv-caption-icon").hide()),i._hideFileIcon(),i._raise("filecleared"),i.$captionContainer.focus(),i._setFileDropZoneTitle(),i.$element},reset:function(){var e=this;if(e._raise("filereset"))return e._resetPreview(),e.$container.find(".fileinput-filename").text(""),j.addCss(e.$container,"file-input-new"),(e.$preview.find(j.FRAMES).length||e.isUploadable&&e.dropZoneEnabled)&&e.$container.removeClass("file-input-new"),e._setFileDropZoneTitle(),e.clearStack(),e.formdata={},e.$element},disable:function(){var e=this;return e.isDisabled=!0,e._raise("filedisabled"),e.$element.attr("disabled","disabled"),e.$container.find(".kv-fileinput-caption").addClass("file-caption-disabled"),e.$container.find(".btn-file, .fileinput-remove, .fileinput-upload, .file-preview-frame button").attr("disabled",!0),e._initDragDrop(),e.$element},enable:function(){var e=this;return e.isDisabled=!1,e._raise("fileenabled"),e.$element.removeAttr("disabled"),e.$container.find(".kv-fileinput-caption").removeClass("file-caption-disabled"),e.$container.find(".btn-file, .fileinput-remove, .fileinput-upload, .file-preview-frame button").removeAttr("disabled"),e._initDragDrop(),e.$element},upload:function(){var e,i,t=this,a=t.getFileStack().length,r=!U.isEmptyObject(t._getExtraData());if(t.isUploadable&&!t.isDisabled)if(0<t.minFileCount&&t._getFileCount(a)<t.minFileCount)t._noFilesError({});else if(t._resetUpload(),0!==a||r)if(t.$progress.removeClass("hide"),t.uploadCount=0,t.uploadStatus={},t.uploadLog=[],t.lock(),t._setProgress(2),0===a&&r)t._uploadExtraOnly();else{if(i=t.filestack.length,t.hasInitData=!1,!t.uploadAsync)return t._uploadBatch(),t.$element;for(a=t._getOutData(),t._raise("filebatchpreupload",[a]),t.fileBatchCompleted=!1,t.uploadCache={content:[],config:[],tags:[],append:!0},t.uploadAsyncCount=t.getFileStack().length,e=0;e<i;e++)t.uploadCache.content[e]=null,t.uploadCache.config[e]=null,t.uploadCache.tags[e]=null;for(t.$preview.find(".file-preview-initial").removeClass(j.SORT_CSS),t._initSortable(),t.cacheInitialPreview=t.getPreview(),e=0;e<i;e++)void 0!==t.filestack[e]&&t._uploadSingle(e,t.filestack,!0)}else t._showUploadError(t.msgUploadEmpty)},destroy:function(){var e=this.$form,i=this.$container,t=this.$element,a=this.namespace;return U(document).off(a),U(window).off(a),e&&e.length&&e.off(a),t.insertBefore(i).off(a).removeData(),i.off().remove(),t},refresh:function(e){var i=this.$element;return e=e?U.extend(!0,{},this.options,e):this.options,this.destroy(),i.fileinput(e),i.val()&&i.trigger("change.fileinput"),i},zoom:function(e){var i=this,t=U("#"+e),a=i.$modal;return t.length?(j.initModal(a),a.html(i._getModalContent()),i._setZoomContent(t),a.modal("show"),void i._initZoomButtons()):void i._log('Cannot zoom to detailed preview! Invalid frame with id: "'+e+'".')},getPreview:function(){return{content:this.initialPreview,config:this.initialPreviewConfig,tags:this.initialPreviewThumbTags}}},U.fn.fileinput=function(l){if(j.hasFileAPISupport()||j.isIE(9)){var s=Array.apply(null,arguments),d=[];switch(s.shift(),this.each(function(){var e=U(this),i=e.data("fileinput"),t="object"==typeof l&&l,a=t.theme||e.data("theme"),r={},n={},o=t.language||e.data("language")||U.fn.fileinput.defaults.language||"en";i||(a&&(n=U.fn.fileinputThemes[a]||{}),"en"===o||j.isEmpty(U.fn.fileinputLocales[o])||(r=U.fn.fileinputLocales[o]||{}),a=U.extend(!0,{},U.fn.fileinput.defaults,n,U.fn.fileinputLocales.en,r,t,e.data()),i=new c(this,a),e.data("fileinput",i)),"string"==typeof l&&d.push(i[l].apply(i,s))}),d.length){case 0:return this;case 1:return d[0];default:return d}}},U.fn.fileinput.defaults={language:"en",showCaption:!0,showBrowse:!0,showPreview:!0,showRemove:!0,showUpload:!0,showCancel:!0,showClose:!0,showUploadedThumbs:!0,browseOnZoneClick:!1,autoReplace:!1,generateFileId:null,previewClass:"",captionClass:"",frameClass:"krajee-default",mainClass:"file-caption-main",mainTemplate:null,purifyHtml:!0,fileSizeGetter:null,initialCaption:"",initialPreview:[],initialPreviewDelimiter:"*$$*",initialPreviewAsData:!1,initialPreviewFileType:"image",initialPreviewConfig:[],initialPreviewThumbTags:[],previewThumbTags:{},initialPreviewShowDelete:!0,removeFromPreviewOnError:!1,deleteUrl:"",deleteExtraData:{},overwriteInitial:!0,previewZoomButtonIcons:{prev:'<i class="glyphicon glyphicon-triangle-left"></i>',next:'<i class="glyphicon glyphicon-triangle-right"></i>',toggleheader:'<i class="glyphicon glyphicon-resize-vertical"></i>',fullscreen:'<i class="glyphicon glyphicon-fullscreen"></i>',borderless:'<i class="glyphicon glyphicon-resize-full"></i>',close:'<i class="glyphicon glyphicon-remove"></i>'},previewZoomButtonClasses:{prev:"btn btn-navigate",next:"btn btn-navigate",toggleheader:"btn btn-default btn-header-toggle",fullscreen:"btn btn-default",borderless:"btn btn-default",close:"btn btn-default"},preferIconicPreview:!1,preferIconicZoomPreview:!1,allowedPreviewTypes:void 0,allowedPreviewMimeTypes:null,allowedFileTypes:null,allowedFileExtensions:null,defaultPreviewContent:null,customLayoutTags:{},customPreviewTags:{},previewFileIcon:'<i class="fa fa-folder"></i>',previewFileIconClass:"file-other-icon",previewFileIconSettings:{},previewFileExtSettings:{},buttonLabelClass:"hidden-xs",browseIcon:'<i class="glyphicon glyphicon-folder-open"></i>&nbsp;',browseClass:"btn btn-primary",removeIcon:'<i class="glyphicon glyphicon-trash"></i>',removeClass:"btn btn-default",cancelIcon:'<i class="glyphicon glyphicon-ban-circle"></i>',cancelClass:"btn btn-default",uploadIcon:'<i class="glyphicon glyphicon-upload"></i>',uploadClass:"btn btn-default",uploadUrl:null,uploadAsync:!0,uploadExtraData:{},zoomModalHeight:480,minImageWidth:null,minImageHeight:null,maxImageWidth:null,maxImageHeight:null,resizeImage:!1,resizePreference:"width",resizeQuality:.92,resizeDefaultImageType:"image/jpeg",resizeIfSizeMoreThan:0,minFileSize:0,maxFileSize:0,maxFilePreviewSize:25600,minFileCount:0,maxFileCount:0,validateInitialCount:!1,msgValidationErrorClass:"text-danger",msgValidationErrorIcon:'<i class="glyphicon glyphicon-exclamation-sign"></i> ',msgErrorClass:"file-error-message",progressThumbClass:"progress-bar progress-bar-success progress-bar-striped active",progressClass:"progress-bar progress-bar-success progress-bar-striped active",progressCompleteClass:"progress-bar progress-bar-success",progressErrorClass:"progress-bar progress-bar-danger",progressUploadThreshold:99,previewFileType:"image",elCaptionContainer:null,elCaptionText:null,elPreviewContainer:null,elPreviewImage:null,elPreviewStatus:null,elErrorContainer:null,errorCloseButton:'<span class="close kv-error-close">&times;</span>',slugCallback:null,dropZoneEnabled:!0,dropZoneTitleClass:"file-drop-zone-title",fileActionSettings:{},otherActionButtons:"",textEncoding:"UTF-8",ajaxSettings:{},ajaxDeleteSettings:{},showAjaxErrorDetails:!0},U.fn.fileinputLocales.en={fileSingle:"file",filePlural:"files",browseLabel:"Browse &hellip;",removeLabel:"Remove",removeTitle:"Clear selected files",cancelLabel:"Cancel",cancelTitle:"Abort ongoing upload",uploadLabel:"Upload",uploadTitle:"Upload selected files",msgNo:"No",msgNoFilesSelected:"No files selected",msgCancelled:"Cancelled",msgZoomModalHeading:"Detailed Preview",msgSizeTooSmall:'File "{name}" (<b>{size} KB</b>) is too small and must be larger than <b>{minSize} KB</b>.',msgSizeTooLarge:'File "{name}" (<b>{size} KB</b>) exceeds maximum allowed upload size of <b>{maxSize} KB</b>.',msgFilesTooLess:"You must select at least <b>{n}</b> {files} to upload.",msgFilesTooMany:"Number of files selected for upload <b>({n})</b> exceeds maximum allowed limit of <b>{m}</b>.",msgFileNotFound:'File "{name}" not found!',msgFileSecured:'Security restrictions prevent reading the file "{name}".',msgFileNotReadable:'File "{name}" is not readable.',msgFilePreviewAborted:'File preview aborted for "{name}".',msgFilePreviewError:'An error occurred while reading the file "{name}".',msgInvalidFileName:'Invalid or unsupported characters in file name "{name}".',msgInvalidFileType:'Invalid type for file "{name}". Only "{types}" files are supported.',msgInvalidFileExtension:'Invalid extension for file "{name}". Only "{extensions}" files are supported.',msgFileTypes:{image:"image",html:"HTML",text:"text",video:"video",audio:"audio",flash:"flash",pdf:"PDF",object:"object"},msgUploadAborted:"The file upload was aborted",msgUploadThreshold:"Processing...",msgUploadBegin:"Initializing...",msgUploadEnd:"Done",msgUploadEmpty:"No valid data available for upload.",msgValidationError:"Validation Error",msgLoading:"Loading file {index} of {files} &hellip;",msgProgress:"Loading file {index} of {files} - {name} - {percent}% completed.",msgSelected:"{n} {files} selected",msgFoldersNotAllowed:"Drag & drop files only! {n} folder(s) dropped were skipped.",msgImageWidthSmall:'Width of image file "{name}" must be at least {size} px.',msgImageHeightSmall:'Height of image file "{name}" must be at least {size} px.',msgImageWidthLarge:'Width of image file "{name}" cannot exceed {size} px.',msgImageHeightLarge:'Height of image file "{name}" cannot exceed {size} px.',msgImageResizeError:"Could not get the image dimensions to resize.",msgImageResizeException:"Error while resizing the image.<pre>{errors}</pre>",msgAjaxError:"Something went wrong with the {operation} operation. Please try again later!",msgAjaxProgressError:"{operation} failed",ajaxOperations:{deleteThumb:"file delete",uploadThumb:"file upload",uploadBatch:"batch file upload",uploadExtra:"form data upload"},dropZoneTitle:"Drag & drop files here &hellip;",dropZoneClickTitle:"<br>(or click to select {files})",previewZoomButtonTitles:{prev:"View previous file",next:"View next file",toggleheader:"Toggle header",fullscreen:"Toggle full screen",borderless:"Toggle borderless mode",close:"Close detailed preview"}},U.fn.fileinput.Constructor=c,U(document).ready(function(){var e=U("input.file[type=file]");e.length&&e.fileinput()})});